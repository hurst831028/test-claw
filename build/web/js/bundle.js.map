{"version":3,"names":["regClass","property","Laya","Sprite","CartoonFace","Script","onAwake","this","eyesRoot","getChildAt","visible","mouthRoot","build","index","eyeIndex","Math","floor","eyes","length","eye","getChildByName","console","error","mouthIndex","mouth","startBlinking","startTalking","blink","Tween","to","scaleY","Ease","linearNone","Handler","create","randomInterval","random","timer","once","talk","y","onUpdate","__decorateClass","String","prototype","LoopMoveSprite","constructor","super","arguments","xDir","xRangeMin","xRangeMax","speed","onLateUpdate","deltaTime","delta","owner","x","type","Number","ColorFilter","SystemSettings","colorFilter","adjustBrightness","adjustContrast","adjustSaturation","stage","filters","SystemDefine","uiRootPrefab","gameCoinInterval","gameCoinPerInterval","gameCoinMax","ServerTime","ItemData","UserData","WalletData","MachineData","hasEmptyIncubationSlot","incubation_list","some","entry","is_in_progress","getIncubationDataCount","MachineCoinData","getTotalGameCoin","game_coin","payed_game_coin","updateGameCoin","currentTime","Date","now","totalDuration","game_coin_last_update_at","T","game_coin_remaining_duration","timeParam","intervals","game_coin_next_update_at","MachineCollectionData","getItemCount","item_list","Object","keys","getItemCountById","itemID","RunTimeData","item","user","wallet","machine_data","machine_coin_data","machine_collection","resetMachineData","TGData","isInit","RunTimeDataManager","_data","_tgData","_callbackMap","tgData","runTimeData","machine","value","_machine","instance","_instance","Error","mergeDeep","target","source","key","Array","isArray","originalTarget","JSON","stringify","invokeModuleCallbacks","isChanged","saveData","newData","registerModuleCallback","module","callback","push","unregisterModuleCallback","filter","cb","forEach","WebMessage","onStart","window","addEventListener","event","message","data","handle","initDataRaw","startParam","platform","version","message2","Browser","onPC","sendMessageToWeb","parent","postMessage","EggConfig","_EggConfig","getConfig","id","ConfigManager","load","loadExcel","ItemConfig","_ItemConfig","MachineConfig","_MachineConfig","ConfigHelper","parseStringArray","split","parseNumberArray","map","_initialized","_configs","initialized","loadAll","excelPath","className","clazz","loader","itemData","itemMap","assign","ID","Loader","name","RigidBody","WeldJoint","Egg","removeJoint","weldJoint","getComponent","destroy","removeRigidBody","rigidBody","init","cartoonFace","eggID","charCodeAt","log","buildJoint","otherBody","selfBody","collideConnected","anchor","frequency","damping","addComponentInstance","allowRotation","clear","backIn","machinePhysics","removeEgg","EggFrame","_iconScale","_iconOriginY","clearEgg","stopIconBounceAnimation","_curEgg","buildEgg","configID","rootWidth","rootHeigth","onLoadCompleteCallback","width","height","_eggConfig","Prefab","then","res","sprite","anchorX","anchorY","addChild","aWidth","aHeight","bWidth","bHeight","scaleX","scale","min","pos","egg","_eggSprite","clearTween","startIconBounceAnimationIncubation","bounce1","linearInOut","bounce2","startIconBounceAnimationReady","backOut","circInOut","bounce3","bounceOut","Arrow","moveSpeed","direction","minY","maxY","SoundManager","SoundFXManager","playMusic","_musicList","on","Event","BLUR","stopMusic","FOCUS","playSoundFX","playSound","_soundFXList","stopSoundFX","stopSound","MUSIC_1000","MUSIC_1000_HappyHour","SFX_ClaimItem","SFX_EggFind01","SFX_EggFind02","SFX_ButtonClick01","SFX_ClawDropping","SFX_ClawGrabbing","SFX_Voice01","SFX_Voice02","SFX_Voice03","SFX_Failed","SFX_Ping","SFX_Gold01","SFX_Gold02","SFX_Gold03","SFX_Gem01","SFX_Gem02","SFX_ItemDrop","SFX_UnlockEggIncuabtion","MathHelper","randomRange","max","Animator2D","Point","Label","Claw","isPicking","_clawState","onDisable","intersectionTestBox","off","TRIGGER_ENTER","onIntersectionTestBoxTriggerEnter","pickupTestBox","onPickupTestBoxTriggerEnter","_positionY","baseSprite","_lineOrignalHeight","lineSprite","pingpong","changeState","colliderB","colliderA","contact","clawFindedEgg","findedEgg","label","eggB","updateGameCoinDisplay","coinData","textGameCoin","text","toString","color","state","playAnimation","pingpongTween","resume","pause","curEgg","moveYDown","randomNumber","downTween","connectEgg","moveYUp","pickupTestWorldPos","localToGlobal","eggWorldPos","finalPos","pickupTestRigidBody","grab","__async","gen","claw","__asyncGenerator","__await","Promise","resolve","setTimeout","waittingTime","processGrabSteps","more","temp","iter","__forAwait","next","done","return","call","animator","play","onFoundEggCallback","CountdownTimer","serverEndTime","onStartedCallback","onTickCallback","onCompleteCallback","_endTime","restart","start","loop","update","remainingTime","getRemainingTime","formatTime","stop","totalSeconds","hours","minutes","seconds","padStart","UIBase","_view","uiManager","_uiManager","view","param","_param","config","_config","initUI","rootAnimation","displayObject","pageWidth","pageHeight","_originScaleX","_originScaleY","bBackgourndCloseButton","getChild","onClick","pop","bCloseButton","bOkButton","open","willOpen","enabled","didOpen","isOpened","withBackground","openBackground","clearAll","from","forceClose","closeBackground","willClose","didClose","popLastUI","popTips","popLastTips","close","UIBackground","forceCloseBackground","ParticlePool","maxSize","pool","getParticle","texture","ParticleClass","particle","reset","returnParticle","Particle","isLoop","setSize","minSize","setLife","minLife","maxLife","isAlive","life","alpha","draw","graphics","drawTexture","size","ParticleSystem","maxParticles","particles","emit","count","i","updateParticle","splice","isAllLive","isLive","ExplosionParticle","gravity","randomX","randomY","fixedLife","angle","PI","vx","cos","vy","sin","startSize","endSize","startAlpha","endAlpha","r","g","b","progress","FXExplosion","particleSystem","frameLoop","onParticleUpdate","onTextureLoaded","UIClaimItem","_loaderItemIcon","asLoader","_imgWindow","asImage","_textCount","asLabel","_textName","_fxRoot","asGraph","_originX","_originY","_fxExplosion","clearIcon","buildIcon","itemConfig","url","Texture","Name","Color","startIconBounceAnimation","Sfx","UICollection","_maxOnePageCollectionNumber","_collectionConfigList","_curDisplayList","_listCollection","asList","_listPageSelect","_textMessage","asTextField","itemRenderer","renderListPageSelect","fgui","Events","CLICK_ITEM","onClickListPageSelectItem","renderListCollection","onClickItem","curMachineID","machineConfig","collectionList","CollectionList","collectionPageNumber","numItems","selectedIndex","refreshCollectionByBageIndex","obj","asCom","textCount","pageIndex","startIndex","endIndex","UIManager","pushUI","ShowMessageBox","btn","asButton","n1","n2","UIFXCoinBackground","_time","_offsetScale","_isMaterialLoaded","UIFXLayer","UIInviteFriends","UILoading","UIMessageBoxOne","content","UIShowEggIncuabtion","_textCooldownTime","_imgEggRoot","_pbEggIncuabtionProgress","asProgress","setIncubationIndex","incubationIndex","machineData","_incubationData","initIcon","initTimeShower","_countdownTimer","config_id","egg_id","IncubationTime","maturation_at","difference","UIShowItem","_curRank","_listStars","renderStars","_textdiscription","buildDisplay","countString","Discription","Rank","UITask","UITips","HttpManager","baseUrl","get","endpoint","params","errorCallback","progressCallback","buildUrl","httpRequest","HttpRequest","COMPLETE","self","evt","err_no","ERROR","PROGRESS","headers","_session","send","post","http","timeout","game_session","err_msg","queryString","encodeURIComponent","join","postWithPromise","httpManager","reject","response","UIUnlockEggIncuabtion","_bPointUnlock","onUnlock","_bGemUnlock","machine_id","updateDisplay","nowSlotCount","unlockIncubatorCost","UnlockIncubatorCost","symbol","cost","UIDefine","_classMap","UI_FX_Layer_HUD","UI_Loading_HUD","UI_MessageBoxOne_HUD","UI_Invite_Friends_HUD","UI_FX_Coin_Background_HUD","UI_Tips_HUD","UI_Task_HUD","UI_Background_HUD","UI_ShowItem_HUD","UI_ShowEggIncuabtion_HUD","UI_UnlockEggIncuabtion_HUD","UI_Collection_HUD","UI_ClaimItem_HUD","instantiate","_viewsDictionary","_uibaseDictionary","_isBackgroundOpen","_uiQueue","_tipsQueue","designHeight","clientWidth","clientHeight","ownerPanel","_uiDefine","initFont","GRoot","inst","zOrder","_uiConfigData","packageList","packageConfigs","packageName","uiBasePath","UIPackage","loadPackage","onUILoaded","fairygui","UIConfig","defaultFont","ttf","Text","TTF","uiConfigs","createObject","uiPackage","uiName","makeFullScreen","sortingOrder","layer","uiClass","lastUI","forceCloseUI","openUI","nextUI","closeUI","pushTips","isOpenedUI","ShowTips","Button","IncubationSlot","_curState","setState","bReady","CLICK","onClickReady","bInfo","onClickInfo","bUnlock","onClickUnlock","e","worldPos","icon","onHarvestEggCallback","textCooldownTime","eggConfig","_incubationEntry","updateSlot","incubationEntry","onDestroy","ChainCollider","MachinePhysics","_eggMap","box2D","Config","isAntialias","Physics2D","I","createHouse","createEggs","house","addComponent","chainCollider","datas","addGroup","rigidbody","ratio","group","k_smallGroup","k_middleGroup","k_largeGroup","egg_list","eggData","Scale","category","k_triangleCategory","mask","k_triangleMask","getEgg","removeAllEggs","clearAllEggs","destroyWorld","k_boxCategory","k_circleCategory","k_boxMask","k_circleMask","TransitionTool","transitionValue","newValue","duration","currentValue","parseFloat","startTime","elapsed","t","round","CoinFlyEffect","coinCount","range","sftx","coins","sfx","targetWorldPos","targetPos","startEffect","coin","createCoin","radius","startX","startY","animateCoin","targetX","targetY","cubicInOut","cubicIn","removeSelf","Keyboard","Machine","backgroundOffsetScale","_arrowDelayTimeCofig","_arrowDelayTime","_backgroundTime","foundEgg","initOrRefreshGameCoinTimeShower","handleFoundEgg","harvestEgg","soltIndex","incubation_index","handleHarvestEgg","_pointFlyEffect","pointIcon","_gemFlyEffect","gemIcon","bGrab","onClickGrab","bCollection","onClickCollection","_machineID","eventListener","incubationSlotList","_resetCoolDownTimer","next_refresh_at","textResetCooldownTime","resetEggs","machineCoinData","_gameCoinCoolDownTimer","textGameCoinCooldownTime","textPoint","point","textGem","gem","arrow","background","material","setFloat","grassGround","MAX_SAFE_INTEGER","eggX","eggY","egg_config_id","ClientHandle","loot_item_id","loot_item_count","KEY_DOWN","keyCode","DOWN","GameStateBase","gameStateManager","Splash","openSplash","closeSplash","processSteps","location","href","includes","startsWith","loginData","init_data_raw","getMachineData","GameStateManager","LoadingState","enter","exit","MainMenuState","machineID","nick_name","_states","newState","_currentState","RandomPositionParticle","pingPong","normalizedTime","FXStart"],"sources":["../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/Component/CartoonFace.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/Component/LoopMoveSprite.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/Component/SystemSettings.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/SystemDefine.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/RunTimeData/RunTimeData.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/RunTimeData/RunTimeDataManager.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/Component/WebMessage.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/Config/ExcelEgg.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/Config/ExcelItem.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/Config/ExcelMachine.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/Config/ConfigManager.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/GameLogic/Egg.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/Example/EggFrame.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/GameLogic/Arrow.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/Component/SoundManager.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/Utils/MathHelper.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/GameLogic/Claw.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/Component/CountdownTimer.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/UI/UIBase.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/UI/HUD/UIBackground.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/Particle/ParticleSystem.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/Particle/FXExplosion.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/UI/HUD/UIClaimItem.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/UI/HUD/UICollection.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/UI/HUD/UIFXCoinBackground.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/UI/HUD/UIFXLayer.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/UI/HUD/UIInviteFriends.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/UI/HUD/UILoading.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/UI/HUD/UIMessageBoxOne.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/UI/HUD/UIShowEggIncuabtion.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/UI/HUD/UIShowItem.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/UI/HUD/UITask.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/UI/HUD/UITips.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/Http/HttpManager.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/UI/HUD/UIUnlockEggIncuabtion.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/UI/UIDefine.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/UI/UIManager.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/GameLogic/IncubationSlot.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/GameLogic/MachinePhysics.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/Utils/TransitionTool .ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/FX/CoinFlyEffect.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/GameLogic/Machine.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/GameState/GameStateBase.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/Component/Splash.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/GameState/LoadingState.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/GameState/MainMenuState.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/GameState/GameStateManager.ts","../../../../Claw-Machine-Project/Claw-Machine-Laya-Project/src/Particle/FXStart.ts"],"sourcesContent":["const { regClass, property } = Laya;\r\nimport { Egg } from \"../GameLogic/Egg\";\r\nimport Sprite = Laya.Sprite\r\n@regClass('9d_4XDZ6SpOvM9UXuhW-Bg')\r\nexport class CartoonFace extends Laya.Script {\r\n    //declare owner : Laya.Sprite3D;\r\n    declare owner : Laya.Sprite;\r\n\r\n    @property([String])\r\n    public eyes: string[];\r\n\r\n    @property([String])\r\n    public mouth: string[];\r\n\r\n    @property(Sprite)\r\n    public eyesRoot: Sprite;\r\n\r\n\r\n    @property(Sprite)\r\n    public mouthRoot: Sprite;\r\n\r\n    //组件被激活后执行，此时所有节点和组件均已创建完毕，此方法只执行一次\r\n    onAwake(): void {\r\n        //关闭默认的\r\n        const defaultEye = this.eyesRoot.getChildAt(0) as Sprite;\r\n        defaultEye.visible = false;\r\n\r\n        const defaultMouth = this.mouthRoot.getChildAt(0) as Sprite;\r\n        defaultMouth.visible = false;\r\n    }\r\n\r\n    //组件被启用后执行，例如节点被添加到舞台后\r\n    //onEnable(): void {}\r\n\r\n    //组件被禁用时执行，例如从节点从舞台移除后\r\n    //onDisable(): void {}\r\n\r\n    //第一次执行update之前执行，只会执行一次\r\n    //onStart(): void {}\r\n\r\n    public build ( index: number) {\r\n        //随机\r\n        const eyeIndex = Math.floor(index % this.eyes.length);\r\n        const eye = this.eyesRoot.getChildByName(this.eyes[eyeIndex]) as Sprite;\r\n        if (eye) {\r\n            eye.visible = true;\r\n        } else {\r\n            console.error(\"eye is null\");\r\n        }\r\n\r\n        const mouthIndex = Math.floor(index % this.mouth.length);\r\n        const mouth = this.mouthRoot.getChildByName(this.mouth[mouthIndex]) as Sprite;\r\n        mouth.visible = true;\r\n\r\n        this.startBlinking();\r\n        this.startTalking();\r\n    }\r\n\r\n    public startBlinking(): void {\r\n        this.blink(); // 立即开始眨眼动画\r\n    }\r\n    \r\n    private blink(): void {\r\n    \r\n        // 闭眼，通过缩放实现\r\n        Laya.Tween.to(this.eyesRoot, { scaleY: 0 }, 150, Laya.Ease.linearNone, Laya.Handler.create(this, () => {\r\n            // 睁眼，恢复缩放\r\n            Laya.Tween.to(this.eyesRoot, { scaleY: 1 }, 150, Laya.Ease.linearNone, Laya.Handler.create(this, () => {\r\n                // 随机间隔再眨眼\r\n                const randomInterval = 3000 + Math.random() * 3000;\r\n                Laya.timer.once(randomInterval, this, this.blink);\r\n            }));\r\n        }));\r\n    }\r\n\r\n    public startTalking(): void {\r\n        this.talk(); // 立即开始嘴巴动画\r\n    }\r\n    \r\n    private talk(): void {\r\n    \r\n        // 闭嘴，缩小 scaleY\r\n        Laya.Tween.to(this.mouthRoot, { y: this.mouthRoot.y + 10 }, 200, Laya.Ease.linearNone, Laya.Handler.create(this, () => {\r\n            // 向上移动，模拟张嘴\r\n            Laya.Tween.to(this.mouthRoot, { y: this.mouthRoot.y - 10 }, 200, Laya.Ease.linearNone, Laya.Handler.create(this, () => {\r\n                // 随机间隔后再执行动作\r\n                const randomInterval = 5000 + Math.random() * 5000;\r\n                Laya.timer.once(randomInterval, this, this.talk);\r\n            }));\r\n        }));\r\n    }\r\n\r\n    //手动调用节点销毁时执行\r\n    //onDestroy(): void {}\r\n\r\n    //每帧更新时执行，尽量不要在这里写大循环逻辑或者使用getComponent方法\r\n    onUpdate(): void {\r\n\r\n    }\r\n\r\n    //每帧更新时执行，在update之后执行，尽量不要在这里写大循环逻辑或者使用getComponent方法\r\n    //onLateUpdate(): void {}\r\n\r\n    //鼠标点击后执行。与交互相关的还有onMouseDown等十多个函数，具体请参阅文档。\r\n    //onMouseClick(): void {}\r\n}","const { regClass, property } = Laya;\r\n\r\n@regClass('dZdn5UrwThSWjU8XRpjDsg')\r\nexport class LoopMoveSprite extends Laya.Script {\r\n    //declare owner : Laya.Sprite3D;\r\n    declare owner : Laya.Sprite;\r\n\r\n    @property({type: Number})\r\n    public xDir: number = 0;\r\n\r\n    @property({type: Number})\r\n    public xRangeMin: number = 0;\r\n\r\n    @property({type: Number})\r\n    public xRangeMax: number = 0;\r\n\r\n    @property({type: Number})\r\n    public speed: number = 0;\r\n\r\n    //组件被激活后执行，此时所有节点和组件均已创建完毕，此方法只执行一次\r\n    //onAwake(): void {}\r\n\r\n    //组件被启用后执行，例如节点被添加到舞台后\r\n    //onEnable(): void {}\r\n\r\n    //组件被禁用时执行，例如从节点从舞台移除后\r\n    //onDisable(): void {}\r\n\r\n    //第一次执行update之前执行，只会执行一次\r\n    //onStart(): void {}\r\n\r\n    //手动调用节点销毁时执行\r\n    //onDestroy(): void {}\r\n\r\n    //每帧更新时执行，尽量不要在这里写大循环逻辑或者使用getComponent方法\r\n    //onUpdate(): void {}\r\n\r\n    //每帧更新时执行，在update之后执行，尽量不要在这里写大循环逻辑或者使用getComponent方法\r\n    onLateUpdate(): void {\r\n        \r\n        let deltaTime = Laya.timer.delta / 1000;\r\n        if (this.xDir > 0){\r\n            this.owner.x += this.xDir * this.speed * deltaTime;\r\n\r\n            if (this.owner.x > this.xRangeMax) {\r\n                this.owner.x = this.xRangeMin;\r\n            }\r\n        }\r\n        \r\n        if (this.xDir < 0){\r\n            this.owner.x += this.xDir * this.speed * deltaTime;\r\n\r\n            if (this.owner.x < this.xRangeMin) {\r\n                this.owner.x = this.xRangeMax;\r\n            }\r\n        }\r\n    }\r\n\r\n    //鼠标点击后执行。与交互相关的还有onMouseDown等十多个函数，具体请参阅文档。\r\n    //onMouseClick(): void {}\r\n}","const { regClass, property } = Laya;\r\nimport ColorFilter = Laya.ColorFilter;\r\n\r\n@regClass('z_GDfvC3TFKMUPAmCdT4hA')\r\nexport class SystemSettings extends Laya.Script {\r\n    //declare owner : Laya.Sprite3D;\r\n    //declare owner : Laya.Sprite;\r\n\r\n    // @property(String)\r\n    // public text: string = \"\";\r\n\r\n    //组件被激活后执行，此时所有节点和组件均已创建完毕，此方法只执行一次\r\n    onAwake(): void {\r\n        var colorFilter: ColorFilter = new ColorFilter();\r\n        colorFilter.adjustBrightness(-40);\r\n        colorFilter.adjustContrast(20);\r\n        colorFilter.adjustSaturation(10);\r\n        Laya.stage.filters = [colorFilter];\r\n    }\r\n\r\n    //组件被启用后执行，例如节点被添加到舞台后\r\n    //onEnable(): void {}\r\n\r\n    //组件被禁用时执行，例如从节点从舞台移除后\r\n    //onDisable(): void {}\r\n\r\n    //第一次执行update之前执行，只会执行一次\r\n    //onStart(): void {}\r\n\r\n    //手动调用节点销毁时执行\r\n    //onDestroy(): void {}\r\n\r\n    //每帧更新时执行，尽量不要在这里写大循环逻辑或者使用getComponent方法\r\n    //onUpdate(): void {}\r\n\r\n    //每帧更新时执行，在update之后执行，尽量不要在这里写大循环逻辑或者使用getComponent方法\r\n    //onLateUpdate(): void {}\r\n\r\n    //鼠标点击后执行。与交互相关的还有onMouseDown等十多个函数，具体请参阅文档。\r\n    //onMouseClick(): void {}\r\n}","export class SystemDefine {\r\n    public static uiRootPrefab = \"resources/prefabs/ui/P_UIRoot.lh\";\r\n\r\n    public static gameCoinInterval = 1 * 60;//10分钟\r\n    public static gameCoinPerInterval = 1;\r\n    public static gameCoinMax = 100;\r\n}","import { SystemDefine } from \"../SystemDefine\";\r\n\r\nexport class ServerTime {\r\n    T: number;\r\n    I: number;\r\n}\r\n\r\nexport class ItemData {\r\n    item_list: any | null;\r\n    machine_collection_data: {\r\n        [key: string]: {\r\n            item_list: any | null;\r\n        };\r\n    };\r\n}\r\n\r\nexport class UserData {\r\n    created_at: {\r\n        T: number;\r\n        I: number;\r\n    };\r\n    updated_at: {\r\n        T: number;\r\n        I: number;\r\n    };\r\n    nick_name: string;\r\n    faction: number;\r\n    unlock_land_level: number;\r\n    user_type: number;\r\n    first_name: string;\r\n    last_name: string;\r\n    help_count: number;\r\n}\r\n\r\nexport class WalletData {\r\n    point: number;\r\n    gem: number;\r\n}\r\n\r\nexport class EggData {\r\n    config_id: string;\r\n}\r\n\r\nexport class IncubationEntry {\r\n    egg_id:string;\r\n    config_id: string;\r\n    is_in_progress: boolean;\r\n    maturation_at: ServerTime;\r\n}\r\n\r\nexport class MachineData {\r\n    id: string;\r\n    egg_list: {\r\n        [eggId: string]: EggData;\r\n    };\r\n    next_refresh_at: ServerTime;\r\n    incubation_list: IncubationEntry[];\r\n    egg_loot_list: Record<string, unknown>; // 可以根据需要进一步定义具体结构\r\n\r\n    public hasEmptyIncubationSlot(): boolean {\r\n        return this.incubation_list.some(entry => !entry.is_in_progress);\r\n    }\r\n\r\n    public getIncubationDataCount(): number {\r\n        return this.incubation_list.length;\r\n    }\r\n}\r\n\r\nexport class MachineCoinData {\r\n    game_coin_last_update_at:ServerTime;\r\n    game_coin_remaining_duration: number;\r\n    game_coin: number;\r\n    payed_game_coin: number;\r\n\r\n    //本地变量\r\n    game_coin_next_update_at:ServerTime;\r\n\r\n    public getTotalGameCoin(): number {\r\n        return this.game_coin + this.payed_game_coin;\r\n    }\r\n\r\n    public updateGameCoin() {\r\n        const currentTime = Math.floor(Date.now() / 1000);\r\n        const elapsedTime = currentTime - this.game_coin_last_update_at.T;\r\n\r\n        // 将剩余的未计算时间加到已计算的时间上\r\n\t    const totalDuration = elapsedTime + (this.game_coin_remaining_duration);\r\n\r\n        const timeParam = SystemDefine.gameCoinInterval;\r\n        const intervals = totalDuration / timeParam;\r\n        this.game_coin += Math.floor(intervals) \r\n        if (this.game_coin > SystemDefine.gameCoinMax) {\r\n            this.game_coin = SystemDefine.gameCoinMax\r\n        }\r\n        this.game_coin_remaining_duration = totalDuration % timeParam;\r\n        this.game_coin_last_update_at.T = currentTime;\r\n\r\n        if(this.game_coin_next_update_at == null){\r\n            this.game_coin_next_update_at = new ServerTime();\r\n        }\r\n        this.game_coin_next_update_at.T = currentTime + timeParam - this.game_coin_remaining_duration;\r\n    }\r\n}\r\n\r\nexport class MachineCollectionData {\r\n    item_list: any | null;\r\n\r\n    public getItemCount(): number {\r\n        if(this.item_list == null) {\r\n            return 0;\r\n        }\r\n        return Object.keys(this.item_list).length;\r\n    }\r\n\r\n    public getItemCountById(itemID: string): number {\r\n        if(this.item_list == null) {\r\n            return 0;\r\n        }\r\n        if(this.item_list[itemID] == null) {\r\n            return 0;\r\n        }\r\n        return this.item_list[itemID];\r\n    }\r\n}\r\n\r\nexport class RunTimeData {\r\n    item: ItemData;\r\n    user: UserData;\r\n    wallet: WalletData;\r\n    machine_data: MachineData;\r\n    machine_coin_data: MachineCoinData;\r\n    machine_collection: MachineCollectionData;\r\n\r\n    // 构造函数直接初始化属性\r\n    constructor() {\r\n        this.item = new ItemData();\r\n        this.user = new UserData();\r\n        this.wallet = new WalletData();\r\n        this.machine_data = new MachineData();\r\n        this.machine_coin_data = new MachineCoinData();\r\n        this.machine_collection = new MachineCollectionData();\r\n    }\r\n\r\n    resetMachineData() {\r\n        this.machine_data = new MachineData();\r\n    }\r\n}\r\n\r\nexport class TGData {\r\n    initDataRaw: string;\r\n    startParam: string;\r\n    platform: string;\r\n    version:string;\r\n    isInit: boolean = false;\r\n}\r\n","\r\nconst { regClass, property } = Laya;\r\nimport { Machine } from \"../GameLogic/Machine\";\r\nimport { RunTimeData, TGData } from \"./RunTimeData\";\r\n\r\n@regClass('fcV-m1clTpK88bUEiz8Jyg')\r\nexport class RunTimeDataManager extends Laya.Script {\r\n    declare owner: Laya.Sprite;\r\n    private static _instance: RunTimeDataManager;  \r\n\r\n    // 保存数据的对象\r\n    private _data: RunTimeData;\r\n\r\n    private _tgData: TGData;\r\n\r\n    // 正在玩的娃娃机\r\n    private _machine: Machine\r\n\r\n    // 回调函数存储\r\n    private _callbackMap: { [module: string]: (() => void)[] };\r\n\r\n    constructor() {  \r\n        super();\r\n        this._data = new RunTimeData();\r\n        this._tgData = new TGData();\r\n        this._callbackMap = {}; // 初始化回调存储\r\n    }\r\n\r\n    public get tgData(): TGData {\r\n        return this._tgData;\r\n    }\r\n\r\n    public get runTimeData(): RunTimeData {\r\n        return this._data;\r\n    }\r\n\r\n    public set machine(value: Machine) {\r\n        this._machine = value;\r\n    }\r\n\r\n    public get machine(): Machine {\r\n        return this._machine;\r\n    }\r\n\r\n    public static get instance(): RunTimeDataManager {  \r\n        if (!RunTimeDataManager._instance) {  \r\n            return null;\r\n        }  \r\n        return RunTimeDataManager._instance;  \r\n    }  \r\n\r\n    onAwake(): void {\r\n        if (RunTimeDataManager._instance) {\r\n            throw new Error(\"Singleton class. Use getInstance() instead.\");\r\n        }\r\n        RunTimeDataManager._instance = this;\r\n    }\r\n\r\n    // 深度合并数据\r\n    private mergeDeep(\r\n        target: any,\r\n        source: any\r\n    ): any {\r\n        for (const key in source) {\r\n            if (source[key] && typeof source[key] === 'object' && !Array.isArray(source[key])) {\r\n                if (!target[key]) {\r\n                    target[key] = {};\r\n                }\r\n                // 如果有模块级回调，保存初始状态\r\n                const originalTarget = JSON.stringify(target[key]);\r\n                \r\n                this.mergeDeep(target[key], source[key]);\r\n\r\n                // 检查整个模块是否变化\r\n                if (originalTarget !== JSON.stringify(target[key])) {\r\n                    this.invokeModuleCallbacks(key); // 调用模块级回调\r\n                }\r\n            } else {\r\n                const isChanged = target[key] !== source[key];\r\n                target[key] = source[key];\r\n                // 字段级回调\r\n                if (isChanged) {\r\n                    this.invokeModuleCallbacks(key);\r\n                }\r\n            }\r\n        }\r\n        return target;\r\n    }\r\n\r\n    // 保存数据，支持部分更新\r\n    public saveData(newData: Partial<RunTimeData>): void {\r\n        this.mergeDeep(this._data, newData); // 更新当前数据\r\n    }\r\n\r\n    // 注册回调\r\n    public registerModuleCallback(module: string, callback: () => void): void {\r\n        if (!this._callbackMap[module]) {\r\n            this._callbackMap[module] = [];\r\n        }\r\n        this._callbackMap[module].push(callback);\r\n    }\r\n\r\n    // 反注册回调\r\n    public unregisterModuleCallback(module: string, callback: () => void): void {\r\n        if (this._callbackMap[module]) {\r\n            this._callbackMap[module] = this._callbackMap[module].filter(cb => cb !== callback);\r\n        }\r\n    }\r\n\r\n    private invokeModuleCallbacks(module: string): void {\r\n        if (this._callbackMap[module]) {\r\n            this._callbackMap[module].forEach(callback => callback());\r\n        }\r\n    }\r\n    // public getData<T>(clazz: new () => T): { [key: string]: T } {\r\n    //     return this._configs[clazz.name];\r\n    // }\r\n\r\n    // public getData(name: string) {\r\n    //     return this._datas[name];\r\n    // }\r\n}\r\n","import { RunTimeDataManager } from \"../RunTimeData/RunTimeDataManager\";\r\n\r\nconst { regClass, property } = Laya;\r\n\r\n@regClass('1ZbHXoulRJCgzOhnyG97lA')\r\nexport class WebMessage extends Laya.Script {\r\n\r\n    onStart() {\r\n      window.addEventListener('message', (event: MessageEvent) => {  \r\n        // 检查消息的来源，确保它来自你的React应用  \r\n        // event.origin 应该是你的React应用所在的域  \r\n        // if (event.origin !== 'http://your-react-app-origin.com') {  \r\n        //   return;  \r\n        // }  \r\n        \r\n        // 处理接收到的消息  \r\n        const message = event.data;\r\n        \r\n        // 根据消息类型执行相应的操作  \r\n        if (message.type === 'REACT_MESSAGE') {  \r\n          // 处理来自React的消息  \r\n          switch(message.data.handle) {\r\n            case \"GAME_READY\":\r\n              const tgData = RunTimeDataManager.instance.tgData;\r\n              tgData.initDataRaw = message.data.initDataRaw;\r\n              tgData.startParam = message.data.startParam;\r\n              tgData.platform = message.data.platform;\r\n              tgData.version = message.data.version;\r\n              tgData.isInit = true;\r\n            break;\r\n          }\r\n\r\n          const tgData = RunTimeDataManager.instance.tgData;\r\n          const message2 = { type: 'GAME_LOG', data: { \r\n              message:`initDataRaw: ${tgData.initDataRaw} startParam: ${tgData.startParam} platform: ${tgData.platform} laya onPC:${Laya.Browser.onPC}`\r\n            } \r\n          };\r\n          WebMessage.sendMessageToWeb(message2);\r\n        }  \r\n      });\r\n\r\n      //const message = { type: 'GAME_EVENT', data: { \"123123123\":123123123 } }; \r\n      //WebMessage.sendMessageToWeb(message);\r\n    }\r\n\r\n    public static sendMessageToWeb(message: any) {  \r\n        // 检查父窗口是否存在，并且不是当前窗口自身  \r\n        if (window.parent !== window && window.parent.postMessage) {  \r\n          // 使用 postMessage 发送消息到父窗口  \r\n          // 第二个参数是目标源，通常设置为 '*' 表示不限制源，但在生产环境中应该设置为允许的源列表  \r\n          window.parent.postMessage(message, '*');  \r\n        }  \r\n    }\r\n}","// EggConfig ����ģ��\r\n\r\nimport { ConfigManager } from \"./ConfigManager\";\r\n\r\nexport class EggConfig {\r\n    ID: string;\r\n    IncubationTime: number;\r\n    Prefab: string;\r\n    Texture: string;\r\n    Scale: number;\r\n    Sfx: string;\r\n    ClientHandle: string;\r\n\r\n    public static getConfig(id: string): EggConfig {\r\n        let config = ConfigManager.instance.getConfig('EggConfig');\r\n        return config[id];\r\n    }\r\n\r\n    public static load() {\r\n        ConfigManager.instance.loadExcel('resources/json/excel/Excel_EggConfig.json', 'EggConfig', EggConfig);\r\n    }\r\n}\r\n\r\n","// ItemConfig ����ģ��\r\n\r\nimport { ConfigManager } from \"./ConfigManager\";\r\n\r\nexport class ItemConfig {\r\n    ID: string;\r\n    Rank: number;\r\n    Count: number;\r\n    Name: string;\r\n    Discription: string;\r\n    ClientHandle: string;\r\n    Texture: string;\r\n    Color: string;\r\n    Sfx: string;\r\n    SellingParam: string;\r\n\r\n    public static getConfig(id: string): ItemConfig {\r\n        let config = ConfigManager.instance.getConfig('ItemConfig');\r\n        return config[id];\r\n    }\r\n\r\n    public static load() {\r\n        ConfigManager.instance.loadExcel('resources/json/excel/Excel_ItemConfig.json', 'ItemConfig', ItemConfig);\r\n    }\r\n}\r\n\r\n","// MachineConfig ����ģ��\r\n\r\nimport { ConfigManager } from \"./ConfigManager\";\r\n\r\nexport class MachineConfig {\r\n    ID: string;\r\n    IsNeedUnLock: boolean;\r\n    UnlockIncubatorCost: string;\r\n    Test: string;\r\n    Prefab: string;\r\n    CollectionList: string;\r\n\r\n    public static getConfig(id: string): MachineConfig {\r\n        let config = ConfigManager.instance.getConfig('MachineConfig');\r\n        return config[id];\r\n    }\r\n\r\n    public static load() {\r\n        ConfigManager.instance.loadExcel('resources/json/excel/Excel_MachineConfig.json', 'MachineConfig', MachineConfig);\r\n    }\r\n}\r\n\r\n","import { WebMessage } from \"../Component/WebMessage\";\r\nimport { EggConfig } from \"./ExcelEgg\";\r\nimport { ItemConfig } from \"./ExcelItem\";\r\nimport { MachineConfig } from \"./ExcelMachine\";\r\n\r\nconst { regClass, property } = Laya;\r\n\r\nexport class ConfigHelper {\r\n    public static parseStringArray(data: string): string[] {\r\n        return data.split(',');\r\n    }\r\n\r\n    public static parseNumberArray(data: string): number[] { \r\n        return data.split(',').map(Number); // 将字符串转换为整数\r\n    }\r\n}\r\n\r\n@regClass('YmQd5OnFTbiJU_nWX1ol4w')\r\nexport class ConfigManager extends Laya.Script {\r\n    declare owner: Laya.Sprite;\r\n    private static _instance: ConfigManager;  \r\n    private _initialized: boolean = false;\r\n\r\n    private _configs: Record<string, any> = {}; // 或者 { [key: string]: any }\r\n\r\n    constructor() {  \r\n        super();\r\n    }\r\n\r\n    public static get instance(): ConfigManager {  \r\n        if (!ConfigManager._instance) {  \r\n            return null;\r\n        }  \r\n        return ConfigManager._instance;  \r\n    }  \r\n\r\n    public get initialized(): boolean {\r\n        return this._initialized;\r\n    }\r\n\r\n    onAwake(): void {\r\n        if (ConfigManager._instance) {\r\n            throw new Error(\"Singleton class. Use getInstance() instead.\");\r\n        }\r\n        ConfigManager._instance = this;\r\n    }\r\n\r\n    public loadAll() {\r\n        // 示例：调用 LoadExcel 方法加载配置\r\n        EggConfig.load();\r\n        ItemConfig.load();\r\n        MachineConfig.load();\r\n\r\n        this._initialized = true;\r\n    }\r\n\r\n    public loadExcel<T>(excelPath: string, className: string, clazz: new () => T) {\r\n        Laya.loader.load(excelPath, Laya.Handler.create(this, (data: any) => {\r\n            const itemData: any[] = data.data;\r\n            const itemMap: { [key: string]: T } = {};\r\n            \r\n            itemData.forEach(item => {\r\n                const instance = new clazz();\r\n                Object.assign(instance, item);\r\n                itemMap[item.ID] = instance; \r\n            });\r\n            \r\n            this._configs[className] = itemMap;\r\n\r\n            //const message = { type: 'GAME_LOG', data: `${excelPath} success ${clazz.name}` }; \r\n            //WebMessage.sendMessageToWeb(message);\r\n\r\n        }), null, Laya.Loader.JSON);\r\n    }\r\n\r\n    //public getData<T>(clazz: new () => T): { [key: string]: T } {\r\n    //    return this._configs[clazz.name];\r\n    //}\r\n\r\n    public getConfig(name: string) {\r\n        return this._configs[name];\r\n    }\r\n}\r\n","const { regClass, property } = Laya;\r\nimport { EggData } from \"../RunTimeData/RunTimeData\";\r\nimport RigidBody = Laya.RigidBody;\r\nimport WeldJoint = Laya.WeldJoint;\r\nimport Tween = Laya.Tween;\r\nimport Ease = Laya.Ease;\r\nimport Handler = Laya.Handler;\r\nimport { CartoonFace } from \"../Component/CartoonFace\";\r\nimport { MachinePhysics } from \"./MachinePhysics\";\r\n\r\n@regClass('rkcx43mVQBOkTeNwD9ERHQ')\r\nexport class Egg extends Laya.Script {\r\n    //declare owner : Laya.Sprite3D;\r\n    declare owner : Laya.Sprite;\r\n    \r\n\r\n    @property(RigidBody)\r\n    public rigidBody : Laya.RigidBody;\r\n\r\n    @property(CartoonFace)\r\n    public cartoonFace: CartoonFace;\r\n\r\n    public eggID: string;\r\n    public machinePhysics: MachinePhysics;\r\n\r\n    public removeJoint() {\r\n        let weldJoint = this.owner.getComponent(WeldJoint)\r\n        if(weldJoint != null) {\r\n            weldJoint.destroy();\r\n        }\r\n    }\r\n\r\n    public removeRigidBody() {\r\n        let rigidBody = this.owner.getComponent(RigidBody)\r\n        if(rigidBody != null) {\r\n            rigidBody.destroy();\r\n        }\r\n    }\r\n\r\n    public init() {\r\n        if(this.cartoonFace != null && this.eggID != null) {\r\n            const index = this.eggID.charCodeAt(this.eggID.length - 1);\r\n            this.cartoonFace.build(index);\r\n        } else {\r\n            console.log(\"cartoonFace or eggID is null\");\r\n        }\r\n    }\r\n\r\n    public buildJoint(otherBody: RigidBody) {\r\n        // let distanceJoint1: DistanceJoint = new DistanceJoint();\r\n        // distanceJoint1.otherBody = this.pickupTestRigidBody;\r\n        // distanceJoint1.selfAnchor = [0.5, 0.5];\r\n        // distanceJoint1.otherAnchor = [this.pickupTestBox.anchorX, this.pickupTestBox.anchorY];\r\n        // distanceJoint1.frequency = 10;\r\n        // distanceJoint1.damping = 0.5;\r\n        // this.curEgg.owner.addComponentInstance(distanceJoint1);\r\n\r\n        let weldJoint: WeldJoint = new WeldJoint();\r\n        weldJoint.selfBody = this.rigidBody;\r\n        weldJoint.otherBody = otherBody;\r\n        weldJoint.collideConnected = false;\r\n        weldJoint.anchor = [0.5, 0.5];\r\n        weldJoint.frequency = 1;\r\n        weldJoint.damping = 1;\r\n        this.owner.addComponentInstance(weldJoint);\r\n        this.rigidBody.allowRotation = true;\r\n    }\r\n\r\n    public clear() {\r\n        this.removeRigidBody();\r\n        Tween.to(this.owner, {\"y\": this.owner.y + 1000}, 1200 + (Math.random() * 200), Ease.backIn, Handler.create(this, () => {  \r\n            this.owner.destroy();\r\n        }));\r\n    }\r\n    //@property(String)\r\n    //public text: string = \"\";\r\n\r\n    //组件被激活后执行，此时所有节点和组件均已创建完毕，此方法只执行一次\r\n    //onAwake(): void {}\r\n\r\n    //组件被启用后执行，例如节点被添加到舞台后\r\n    //onEnable(): void {}\r\n\r\n    //组件被禁用时执行，例如从节点从舞台移除后\r\n    //onDisable(): void {}\r\n\r\n    //第一次执行update之前执行，只会执行一次\r\n    //onStart(): void {}\r\n\r\n    //手动调用节点销毁时执行\r\n    //onDestroy(): void {}\r\n\r\n    //每帧更新时执行，尽量不要在这里写大循环逻辑或者使用getComponent方法\r\n    onUpdate(): void {\r\n        if(this.owner.y > 3000) {\r\n            this.machinePhysics.removeEgg(this.eggID);\r\n            console.log(\"force remove egg \" + this.eggID)\r\n        }\r\n    }\r\n\r\n    //每帧更新时执行，在update之后执行，尽量不要在这里写大循环逻辑或者使用getComponent方法\r\n    //onLateUpdate(): void {}\r\n\r\n    //鼠标点击后执行。与交互相关的还有onMouseDown等十多个函数，具体请参阅文档。\r\n    //onMouseClick(): void {}\r\n}","const { regClass, property } = Laya;\r\nimport { EggConfig } from \"../Config/ExcelEgg\";\r\nimport RigidBody = Laya.RigidBody;\r\nimport WeldJoint = Laya.WeldJoint;\r\nimport Tween = Laya.Tween;\r\nimport Ease = Laya.Ease;\r\nimport Handler = Laya.Handler;\r\nimport { Egg } from \"../GameLogic/Egg\";\r\n\r\n/////////暂时没用用\r\n\r\n@regClass('nnGeTxJ4Q_GhohA2o0D7oQ')\r\nexport class EggFrame extends Laya.Script {\r\n    //declare owner : Laya.Sprite3D;\r\n    declare owner : Laya.Sprite;\r\n    private _eggConfig: EggConfig;\r\n    private _eggSprite: Laya.Sprite;\r\n    private _iconScale = 0;\r\n    private _iconOriginY = 0;\r\n    private _curEgg: Egg;\r\n    private onLoadCompleteCallback: () => void;\r\n\r\n    public clearEgg() {\r\n        // 停止跳动动画\r\n        this.stopIconBounceAnimation();\r\n\r\n        if(this._curEgg != null) {\r\n            this._curEgg.owner.destroy();\r\n            this._curEgg = null;\r\n        }\r\n    }\r\n    \r\n    public buildEgg(configID: string,\r\n        rootWidth: number,\r\n        rootHeigth: number,\r\n        onLoadCompleteCallback: () => void,\r\n    ) {\r\n        \r\n        this.onLoadCompleteCallback = onLoadCompleteCallback;\r\n        this.owner.width = rootWidth;\r\n        this.owner.height = rootHeigth;\r\n\r\n        this._eggConfig = EggConfig.getConfig(configID);\r\n        Laya.loader.load(this._eggConfig.Prefab).then(res => {\r\n            let sprite: Laya.Sprite = res.create();\r\n            sprite.anchorX = 0.5;\r\n            sprite.anchorY = 0.5;\r\n\r\n            this.owner.addChild(sprite);\r\n\r\n            // 获取 icon 和 sprite 的宽高\r\n            let aWidth = this.owner.width;\r\n            let aHeight = this.owner.height;\r\n\r\n            let bWidth = sprite.width * 1.2;\r\n            let bHeight = sprite.height * 1.2;\r\n\r\n            // 计算宽高比例\r\n            let scaleX = aWidth / bWidth;\r\n            let scaleY = aHeight / bHeight;\r\n\r\n            // 取最小的比例来保证等比缩放\r\n            let scale = Math.min(scaleX, scaleY);\r\n\r\n            // 应用等比缩放\r\n            sprite.scale(scale, scale, true);\r\n\r\n            // 将 sprite 放置在 icon 的中心位置\r\n            sprite.pos(aWidth / 2, aHeight / 2 + bHeight / 2);\r\n\r\n\r\n            sprite.anchorY = 1;\r\n\r\n            \r\n            const egg = sprite.getComponent(Egg);\r\n            egg.removeRigidBody();\r\n            this._curEgg = egg;\r\n\r\n            this._eggSprite = sprite;\r\n            this._iconScale = this._eggSprite.scaleY;\r\n            this._iconOriginY = this._eggSprite.y;\r\n\r\n            this.onLoadCompleteCallback();\r\n        }); \r\n    }\r\n\r\n    // 停止跳动动画\r\n    private stopIconBounceAnimation() {\r\n        Laya.Tween.clearTween(this._curEgg.owner); // 清除 this.icon 上的所有动画\r\n    }\r\n\r\n    // 给icon增加一个跳动的动画效果\r\n    private startIconBounceAnimationIncubation() {\r\n        // 首先停止之前可能存在的动画\r\n        this.stopIconBounceAnimation(); \r\n\r\n        if (this._curEgg == null) return;\r\n\r\n        // 动画函数：让icon缩放变大并稍微上移，带有弹力效果\r\n        const bounce1 = () => {\r\n            Laya.Tween.to(this._curEgg.owner, { scaleX: this._iconScale * 1.1, scaleY: this._iconScale * 0.8 }, 1000, Laya.Ease.linearInOut, Laya.Handler.create(this, bounce2));\r\n        };\r\n\r\n        // 动画函数：让icon缩放变小并回到原位置，带有弹力效果\r\n        const bounce2 = () => {\r\n            Laya.Tween.to(this._curEgg.owner, { scaleX: this._iconScale, scaleY: this._iconScale }, 1000, Laya.Ease.linearInOut, Laya.Handler.create(this, bounce1));\r\n        };\r\n\r\n        // 开始第一次动画\r\n        bounce1();\r\n    }\r\n\r\n    private startIconBounceAnimationReady() {\r\n        // 首先停止之前可能存在的动画\r\n        this.stopIconBounceAnimation(); \r\n\r\n        if (this._curEgg == null) return;\r\n\r\n        // 动画函数：让icon缩放变大并稍微上移，带有弹力效果\r\n        const bounce1 = () => {\r\n            Laya.Tween.to(this._curEgg.owner, { scaleX: this._iconScale * 1.1,  scaleY: this._iconScale * 0.8 }, 1000, Laya.Ease.backOut, Laya.Handler.create(this, bounce2));\r\n        };\r\n\r\n        // 动画函数：让icon缩放变小并回到原位置，带有弹力效果\r\n        const bounce2 = () => {\r\n            Laya.Tween.to(this._curEgg.owner, { scaleX: this._iconScale * 1, scaleY: this._iconScale * 1, y: this._iconOriginY - 100}, 200, Laya.Ease.circInOut, Laya.Handler.create(this, bounce3));\r\n        };\r\n\r\n        // 动画函数：让icon缩放变小并回到原位置，带有弹力效果\r\n        const bounce3 = () => {\r\n            Laya.Tween.to(this._curEgg.owner, { scaleX: this._iconScale * 1, scaleY: this._iconScale * 1, y: this._iconOriginY }, 1000, Laya.Ease.bounceOut, Laya.Handler.create(this, bounce1));\r\n        };\r\n\r\n        // 开始第一次动画\r\n        bounce1();\r\n    }\r\n\r\n}","const { regClass, property } = Laya;\r\n\r\n@regClass('6e9BXDZiQn-RSSxV5cRK1g')\r\nexport class Arrow extends Laya.Script {\r\n    declare owner: Laya.Sprite;\r\n\r\n    // 移动速度\r\n    private moveSpeed: number = 2; \r\n    // 移动方向，1 表示向上，-1 表示向下\r\n    private direction: number = 1; \r\n    // 最大和最小 Y 坐标\r\n    private minY: number;\r\n    private maxY: number;\r\n\r\n    // 组件被激活后执行，此时所有节点和组件均已创建完毕，此方法只执行一次\r\n    onAwake(): void {\r\n        this.minY = this.owner.y - 20; // 根据需要设置最小 Y 坐标\r\n        this.maxY = this.owner.y + 20; // 根据需要设置最大 Y 坐标\r\n    }\r\n\r\n    // 每帧更新时执行\r\n    onUpdate(): void {\r\n        // 更新箭头的 Y 坐标\r\n        this.owner.y += this.moveSpeed * this.direction;\r\n\r\n        // 检查边界\r\n        if (this.owner.y >= this.maxY) {\r\n            this.direction = -1; // 到达上边界后，改变方向\r\n        } else if (this.owner.y <= this.minY) {\r\n            this.direction = 1; // 到达下边界后，改变方向\r\n        }\r\n    }\r\n}\r\n","const { regClass, property } = Laya;\r\nimport SoundManager = Laya.SoundManager;\r\n\r\n@regClass('nqDjq5ZVQJOFBV76vcnISg')\r\nexport class SoundFXManager {\r\n\r\n    private static _musicList:  Record<string, string> = {\r\n        \"MUSIC_1000\":\"resources/sound/music/MUSIC_1000.mp3\",\r\n        \"MUSIC_1000_HappyHour\":\"resources/sound/music/MUSIC_1000_HappyHour.mp3\",\r\n    };\r\n\r\n    private static _soundFXList:  Record<string, string> = {\r\n        \"SFX_ClaimItem\":\"resources/sound/sfx/SFX_ClaimItem.mp3\",\r\n        \"SFX_EggFind01\":\"resources/sound/sfx/SFX_EggFind01.mp3\",\r\n        \"SFX_EggFind02\":\"resources/sound/sfx/SFX_EggFind02.mp3\",\r\n        \"SFX_ButtonClick01\":\"resources/sound/sfx/SFX_ButtonClick01.mp3\",\r\n        \"SFX_ClawDropping\":\"resources/sound/sfx/SFX_ClawDropping.wav\",\r\n        \"SFX_ClawGrabbing\":\"resources/sound/sfx/SFX_ClawGrabbing.wav\",\r\n        \"SFX_Voice01\":\"resources/sound/sfx/SFX_Voice01.mp3\",\r\n        \"SFX_Voice02\":\"resources/sound/sfx/SFX_Voice02.mp3\",\r\n        \"SFX_Voice03\":\"resources/sound/sfx/SFX_Voice03.mp3\",\r\n        \"SFX_Failed\":\"resources/sound/sfx/SFX_Failed.mp3\",\r\n        \"SFX_Ping\":\"resources/sound/sfx/SFX_Ping.wav\",\r\n        \"SFX_Gold01\":\"resources/sound/sfx/SFX_Gold01.mp3\",\r\n        \"SFX_Gold02\":\"resources/sound/sfx/SFX_Gold02.mp3\",\r\n        \"SFX_Gold03\":\"resources/sound/sfx/SFX_Gold03.mp3\",\r\n        \"SFX_Gem01\":\"resources/sound/sfx/SFX_Gem01.mp3\",\r\n        \"SFX_Gem02\":\"resources/sound/sfx/SFX_Gem02.wav\",\r\n        \"SFX_ItemDrop\":\"resources/sound/sfx/SFX_ItemDrop.mp3\",\r\n        \"SFX_UnlockEggIncuabtion\":\"resources/sound/sfx/SFX_UnlockEggIncuabtion.wav\",\r\n    };\r\n\r\n    public static playMusic(name: string): void {\r\n        SoundManager.playMusic(this._musicList[name], 10000);\r\n        Laya.stage.on(Laya.Event.BLUR, this, () => {\r\n            SoundManager.stopMusic();\r\n        });\r\n\r\n        //获得舞台焦点（切回游戏）的处理\r\n        Laya.stage.on(Laya.Event.FOCUS, this, () => {\r\n            SoundManager.playMusic(this._musicList[name], 10000);\r\n        });\r\n    }\r\n\r\n    public static stopMusic(): void {\r\n        SoundManager.stopMusic();\r\n    }\r\n\r\n    // public static setVolume(volume: number): void {\r\n    //     SoundManager.setMusicVolume(volume);\r\n    // }\r\n\r\n    public static playSoundFX(name: string): void {\r\n        SoundManager.playSound(this._soundFXList[name]);\r\n    }\r\n\r\n    public static stopSoundFX(name: string): void {\r\n        SoundManager.stopSound(this._soundFXList[name]);\r\n    }\r\n\r\n    /**\r\n     * 设置声音音量。根据参数不同，可以分别设置指定声音（背景音乐或音效）音量或者所有音效（不包括背景音乐）音量。\r\n     * @param volume    音量。初始值为1。音量范围从 0（静音）至 1（最大音量）。\r\n     * @param url        (default = null)声音播放地址。默认为null。为空表示设置所有音效（不包括背景音乐）的音量，不为空表示设置指定声音（背景音乐或音效）的音量。\r\n     */\r\n    // static setSoundVolume(volume: number, url: string = null): void {\r\n    //     if (url) {\r\n    //         SoundManager._setVolume(url, volume);\r\n    //     } else {\r\n    //         SoundManager.soundVolume = volume;\r\n    //         for (let i = SoundFXManager._channels.length - 1; i >= 0; i--) {\r\n    //             let channel = SoundFXManager._channels[i];\r\n    //             if (channel.url != SoundFXManager._bgMusic) {\r\n    //                 channel.volume = volume;\r\n    //             }\r\n    //         }\r\n    //     }\r\n    // } \r\n}","export class MathHelper {\r\n    public static randomRange(min:any,max:any): any {\r\n        return Math.floor(Math.random() * (max - min + 1) + min);\r\n    }\r\n}\r\n","const { regClass, property } = Laya;\r\n\r\nimport { Egg } from \"./Egg\";\r\nimport { Machine } from \"./Machine\";\r\nimport Animator2D = Laya.Animator2D;\r\nimport Sprite = Laya.Sprite;\r\nimport Event = Laya.Event;\r\nimport ColliderBase = Laya.ColliderBase;\r\nimport RigidBody = Laya.RigidBody;\r\nimport Tween = Laya.Tween;\r\nimport Ease = Laya.Ease;\r\nimport Handler = Laya.Handler;\r\nimport WeldJoint = Laya.WeldJoint;\r\nimport MathUtil = Laya.MathUtil;\r\nimport Point = Laya.Point;\r\nimport Label = Laya.Label;\r\nimport { RunTimeDataManager } from \"../RunTimeData/RunTimeDataManager\";\r\nimport { SoundFXManager } from \"../Component/SoundManager\";\r\nimport { MathHelper } from \"../Utils/MathHelper\";\r\n\r\nenum ClawState {\r\n    None,\r\n    Idle,//待机,可移动\r\n    Dropping,//下落\r\n    DroppingStop,//下落停止\r\n    Grabbing,//抓取\r\n    Pulling,//拉起\r\n}\r\n\r\n// 定义生成器函数  \r\nasync function* processGrabSteps(claw:Claw) {  \r\n\r\n    //下落\r\n    claw.changeState(ClawState.Dropping)\r\n    \r\n    while (!claw.clawFindedEgg) {  \r\n        // 等待一段时间后再检查  \r\n        await new Promise(resolve => setTimeout(resolve, 100));  \r\n        //yield \"Checking claw.clawFindedEgg...\";\r\n    }\r\n\r\n    //下落停止\r\n    claw.changeState(ClawState.DroppingStop)\r\n    claw.waittingTime = 0;\r\n    while (claw.waittingTime < 200) {  \r\n        await new Promise(resolve => setTimeout(resolve, 100));\r\n        //yield \"Checking claw.clawFindedEgg...\";\r\n        claw.waittingTime += 100;\r\n    }\r\n\r\n    //抓取\r\n    claw.changeState(ClawState.Grabbing)\r\n\r\n    claw.waittingTime = 0;\r\n    while (claw.waittingTime < 1000) {  \r\n        await new Promise(resolve => setTimeout(resolve, 100));\r\n        //yield \"Checking claw.clawFindedEgg...\";\r\n        claw.waittingTime += 100;\r\n    }\r\n    \r\n    //拉起\r\n    claw.changeState(ClawState.Pulling)\r\n    \r\n    claw.waittingTime = 0;\r\n    while (claw.waittingTime < 3000) {  \r\n        await new Promise(resolve => setTimeout(resolve, 100));\r\n        //yield \"Checking claw.clawFindedEgg...\";\r\n        claw.waittingTime += 100;\r\n    }\r\n\r\n    claw.changeState(ClawState.Idle)\r\n}  \r\n\r\n\r\n@regClass('pneh_T95RWiOY4p54TqJ9g')\r\nexport class Claw extends Laya.Script {\r\n    //declare owner : Sprite3D;\r\n    declare owner : Sprite;\r\n\r\n    @property(Sprite)\r\n    public clawLeft : Sprite;\r\n\r\n    @property(Sprite)\r\n    public clawRight : Sprite;\r\n\r\n    @property( { type:Animator2D } ) //拿到 Animation 组件\r\n    public animator: Animator2D;\r\n\r\n    @property(Sprite)\r\n    public intersectionTestBox: Sprite;\r\n\r\n    @property(Sprite)\r\n    public pickupTestBox: Sprite;\r\n\r\n    @property(RigidBody)\r\n    public pickupTestRigidBody: RigidBody;\r\n\r\n    @property(Sprite)\r\n    public lineSprite: Sprite;\r\n\r\n    @property(Sprite)\r\n    public baseSprite: Sprite;\r\n\r\n    @property(Label)\r\n    public textGameCoin: Label;\r\n\r\n    //找到蛋之后的反馈\r\n    public onFoundEggCallback: (eggID: string) => void;\r\n\r\n    public clawFindedEgg : boolean;\r\n    public waittingTime: number;\r\n    public downTween: Tween;\r\n    public pingpongTween: Tween;\r\n    public findedEgg: Egg;\r\n    public curEgg: Egg;\r\n    \r\n    public isPicking = false;\r\n\r\n    private _clawState:ClawState = ClawState.None;\r\n    private _positionY: number;\r\n    private _lineOrignalHeight: number;\r\n\r\n    //组件被激活后执行，此时所有节点和组件均已创建完毕，此方法只执行一次\r\n    //onAwake(): void {}\r\n\r\n    //组件被启用后执行，例如节点被添加到舞台后\r\n    //onEnable(): void {}\r\n\r\n    //组件被禁用时执行，例如从节点从舞台移除后\r\n    onDisable(): void {\r\n        this.intersectionTestBox.off(Event.TRIGGER_ENTER, this, this.onIntersectionTestBoxTriggerEnter);\r\n        this.pickupTestBox.off(Event.TRIGGER_ENTER, this, this.onPickupTestBoxTriggerEnter);\r\n    }\r\n\r\n    //第一次执行update之前执行，只会执行一次\r\n    onStart(): void {\r\n        //console.log(\"Claw\");\r\n        //this.animator.play(\"A_Claw_Open\");\r\n\r\n        this.intersectionTestBox.on(Event.TRIGGER_ENTER, this, this.onIntersectionTestBoxTriggerEnter);\r\n        this.pickupTestBox.on(Event.TRIGGER_ENTER, this, this.onPickupTestBoxTriggerEnter);\r\n\r\n        this._positionY = this.baseSprite.y;\r\n        this._lineOrignalHeight = this.lineSprite.height;\r\n        //这个设置只是为了激活物理\r\n        this.owner.x = 20;\r\n\r\n        //这个勾爪左右的逻辑,这个可以专门做一个机器\r\n        this.pingpong();\r\n\r\n        this.changeState(ClawState.Idle);\r\n    }\r\n\r\n    onIntersectionTestBoxTriggerEnter(colliderB: ColliderBase, colliderA: ColliderBase, contact: any) {\r\n        // let bodyB: RigidBody = colliderB.owner.getComponent(RigidBody);        \r\n        // console.log(\"TestBoxTriggerEnter bodyB:\", bodyB);\r\n\r\n        // let bodyA: RigidBody = colliderA.owner.getComponent(RigidBody);\r\n        // console.log(\"TestBoxTriggerEnter bodyA:\", bodyA);\r\n\r\n        this.clawFindedEgg = true;\r\n    }\r\n\r\n    onPickupTestBoxTriggerEnter(colliderB: ColliderBase, colliderA: ColliderBase, contact: any) {\r\n\r\n        if(this.findedEgg == null && colliderB.label == \"egg\" && this._clawState < ClawState.Pulling)\r\n        {\r\n            let eggB:Egg = colliderB.owner.getComponent(Egg);\r\n            //console.log(\"Pickup bodyB:\", eggB);\r\n            this.findedEgg = eggB;\r\n        }\r\n    }\r\n\r\n    public updateGameCoinDisplay() {\r\n        const coinData = RunTimeDataManager.instance.runTimeData.machine_coin_data;\r\n        this.textGameCoin.text = coinData.getTotalGameCoin().toString();\r\n        if (coinData.getTotalGameCoin() <= 0) {\r\n            this.textGameCoin.color = \"#FF6480\";\r\n        } else {\r\n            this.textGameCoin.color = \"#FFFFFF\";\r\n        }\r\n    }\r\n\r\n    public changeState(state:ClawState) : void {\r\n        this._clawState = state;\r\n        switch (state) {\r\n            case ClawState.Idle:\r\n                this.playAnimation(\"A_Claw_Idle\");\r\n                this.isPicking = false;\r\n                this.pingpongTween.resume();\r\n                break;\r\n            case ClawState.Dropping:\r\n                this.pingpongTween.pause();\r\n                this.playAnimation(\"A_Claw_Open\");\r\n                this.findedEgg = null;\r\n                this.curEgg = null;\r\n                this.moveYDown();\r\n                SoundFXManager.playSoundFX(\"SFX_ClawDropping\");\r\n                \r\n                const randomNumber = MathHelper.randomRange(1, 2);\r\n                SoundFXManager.playSoundFX(`SFX_Voice0${randomNumber}`);\r\n                break;\r\n            case ClawState.DroppingStop:\r\n                this.downTween.clear();\r\n                this.downTween = null;\r\n                this.playAnimation(\"A_Claw_DroppingStop\");\r\n                break;\r\n            case ClawState.Grabbing:\r\n                SoundFXManager.playSoundFX(\"SFX_ClawGrabbing\");\r\n                this.playAnimation(\"A_Claw_Close\");\r\n                this.connectEgg();\r\n                break;\r\n            case ClawState.Pulling:\r\n                this.moveYUp();\r\n                this.playAnimation(\"A_Claw_Idle\");\r\n                //this.animator.play(\"A_Claw_Idle\");\r\n                break;\r\n        }\r\n    }\r\n\r\n    public connectEgg(): void {\r\n        if(this.findedEgg != null) {\r\n            this.curEgg = this.findedEgg;\r\n            this.findedEgg = null;\r\n            \r\n            let pickupTestWorldPos: Point = Point.create();\r\n            pickupTestWorldPos.x = this.pickupTestBox.width * this.pickupTestBox.anchorX;\r\n            pickupTestWorldPos.y = this.pickupTestBox.height * this.pickupTestBox.anchorY;\r\n            pickupTestWorldPos = this.pickupTestBox.localToGlobal(pickupTestWorldPos);\r\n\r\n            let eggWorldPos: Point = Point.create();\r\n            eggWorldPos.x = this.curEgg.owner.width * this.curEgg.owner.anchorX;\r\n            eggWorldPos.y = this.curEgg.owner.height * this.curEgg.owner.anchorY;\r\n            eggWorldPos = this.curEgg.owner.localToGlobal(eggWorldPos);\r\n\r\n            let finalPos: Point = Point.create();\r\n            finalPos.x = this.curEgg.owner.x + (pickupTestWorldPos.x - eggWorldPos.x);\r\n            finalPos.y = this.curEgg.owner.y + (pickupTestWorldPos.y - eggWorldPos.y);\r\n\r\n            Tween.to(this.curEgg.owner, {\"x\": finalPos.x, \"y\": finalPos.y}, 200, Ease.linearNone, Handler.create(this, () => {  \r\n                this.curEgg.buildJoint(this.pickupTestRigidBody);\r\n            }));\r\n        }\r\n    }\r\n\r\n\r\n    public grab(): void {\r\n        \r\n        if(this.isPicking) {\r\n            return;\r\n        }\r\n        \r\n        this.clawFindedEgg = false;\r\n        this.isPicking = true;\r\n\r\n        (async () => {  \r\n            const gen = processGrabSteps(this);  \r\n            for await (const message of gen) {  \r\n                console.log(message); // 输出生成器返回的状态信息  \r\n            }  \r\n        })();\r\n    }\r\n\r\n    public playAnimation(name:string): void {\r\n       // this.animator.crossFade(name, 0.5);\r\n        this.animator.play(name);\r\n    }\r\n\r\n    public moveYDown(): void {\r\n        this.downTween = Tween.to(this.baseSprite, { \"y\": 1100 }, 2000, Ease.linearNone, Handler.create(this, () => {  \r\n            this.clawFindedEgg = true;\r\n        }));\r\n\t} \r\n\r\n    public pingpong(): void {\r\n        this.pingpongTween = Tween.to(this.owner, { \"x\": 680 }, 2000, Ease.linearNone, Handler.create(this, () => {  \r\n            this.pingpongTween = Tween.to(this.owner, { \"x\": -50 }, 2000, Ease.linearNone, Handler.create(this, () => {  \r\n                this.pingpong();\r\n            }));\r\n        }));\r\n\t} \r\n\r\n    public moveYUp(): void {\r\n        Tween.to(this.baseSprite, { \"y\": this._positionY }, 2000, Ease.backIn, Handler.create(this, () => {  \r\n            if (this.curEgg != null) {\r\n                if(this.onFoundEggCallback != null) {\r\n                    this.onFoundEggCallback(this.curEgg.eggID)\r\n                }\r\n                this.curEgg = null;\r\n            }\r\n            this.clawFindedEgg = true;\r\n        }));\r\n\t} \r\n\r\n    //手动调用节点销毁时执行\r\n    //onDestroy(): void {}\r\n\r\n    //每帧更新时执行，尽量不要在这里写大循环逻辑或者使用getComponent方法\r\n    //onUpdate(): void {}\r\n\r\n    //每帧更新时执行，在update之后执行，尽量不要在这里写大循环逻辑或者使用getComponent方法\r\n    onLateUpdate(): void {\r\n\r\n        if (this._clawState == ClawState.Idle) {\r\n            \r\n        } else if (this._clawState == ClawState.Dropping || this._clawState == ClawState.Pulling) {\r\n            this.lineSprite.height = this.baseSprite.y - this._positionY + this._lineOrignalHeight;\r\n        }\r\n    }\r\n\r\n    //鼠标点击后执行。与交互相关的还有onMouseDown等十多个函数，具体请参阅文档。\r\n    //onMouseClick(): void {}\r\n}","export class CountdownTimer {\r\n    private _endTime: number;  // Server's UTC timestamp in milliseconds\r\n    private onStartedCallback: (remainingTime: string, difference: number) => void;\r\n    private onTickCallback: (remainingTime: string, difference: number) => void;\r\n    private onCompleteCallback: () => void;\r\n    \r\n\r\n    constructor(\r\n        serverEndTime: number, // Server-provided UTC timestamp\r\n        onStartedCallback: (remainingTime: string, difference: number) => void,\r\n        onTickCallback: (remainingTime: string, difference: number) => void,\r\n        onCompleteCallback: () => void,\r\n    ) {\r\n        this._endTime = serverEndTime; // Adjusted end time\r\n        this.onStartedCallback = onStartedCallback;\r\n        this.onTickCallback = onTickCallback;\r\n        this.onCompleteCallback = onCompleteCallback;\r\n    }\r\n\r\n    public restart(serverEndTime: number) {\r\n        this._endTime = serverEndTime; // Adjusted end time\r\n        this.start();\r\n    }\r\n\r\n    // Start the countdown\r\n    public start() {\r\n        // Use Laya.timer to loop the countdown\r\n        Laya.timer.loop(1000, this, this.update);\r\n        const remainingTime = this.getRemainingTime();\r\n        this.onStartedCallback(this.formatTime(remainingTime), remainingTime);\r\n    }\r\n\r\n    private getRemainingTime() {\r\n        const currentTime = Math.floor(Date.now() / 1000); // Convert to seconds\r\n        return this._endTime - currentTime;\r\n    }\r\n\r\n    // Update the countdown logic every second\r\n    private update() {\r\n        const remainingTime = this.getRemainingTime();\r\n        this.onTickCallback(this.formatTime(remainingTime), remainingTime);\r\n        \r\n        if (remainingTime <= 0) {\r\n            this.stop();\r\n            this.onCompleteCallback();\r\n        }\r\n    }\r\n\r\n    // Stop the countdown\r\n    public stop() {\r\n        Laya.timer.clear(this, this.update); // Clear the timer loop\r\n    }\r\n\r\n    // Format the remaining time in hh:mm:ss format\r\n    private formatTime(remainingTime: number): string {\r\n        const totalSeconds = remainingTime;\r\n        const hours = Math.floor(totalSeconds / 3600);\r\n        const minutes = Math.floor((totalSeconds % 3600) / 60);\r\n        const seconds = totalSeconds % 60;\r\n\r\n        return `${hours.toString().padStart(2, '0')}:${minutes\r\n            .toString()\r\n            .padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\r\n    }\r\n}\r\n","import { UIManager } from \"./UIManager\";\r\nimport Tween = Laya.Tween;\r\nimport Ease = Laya.Ease;\r\n\r\nexport abstract class UIBase extends Laya.Script {\r\n\r\n    declare owner : Laya.Sprite;\r\n    private _view: fgui.GComponent;\r\n    private _config: any; \r\n    private _originScaleX: number;\r\n    private _originScaleY: number;\r\n    private _param: any;\r\n\r\n    protected _uiManager: UIManager;\r\n\r\n    public set uiManager(uiManager: UIManager) {\r\n        this._uiManager = uiManager;\r\n    }\r\n\r\n    public get uiManager() : UIManager {\r\n        return this._uiManager;\r\n    }\r\n\r\n    constructor() {  \r\n        super();\r\n        this._view = null;\r\n    }\r\n\r\n    public get view(): fgui.GComponent {\r\n        return this._view;\r\n    }\r\n\r\n    public set view(value: fgui.GComponent) {\r\n        this._view = value;\r\n    }\r\n\r\n    public set param (data: any) {\r\n        this._param = data;\r\n    }\r\n\r\n    public get param () : any {\r\n        return this._param;\r\n    }\r\n\r\n    public get config(): any {\r\n        return this._config;\r\n    }\r\n\r\n    public set config(value: any) {\r\n        this._config = value;\r\n    }\r\n\r\n    public initUI() : void{\r\n        let rootAnimation = this.view;//.getChild(\"Root_Animation\")\r\n        if (rootAnimation) {\r\n            //console.log(\"Root_Animation: \" + rootAnimation.name);\r\n            rootAnimation.displayObject.anchorX = 0.5;\r\n            rootAnimation.displayObject.anchorY = 0.5;\r\n            rootAnimation.displayObject.x = this.uiManager.pageWidth * 0.5;\r\n            rootAnimation.displayObject.y = this.uiManager.pageHeight * 0.5;\r\n            this._originScaleX = rootAnimation.displayObject.scaleX;\r\n            this._originScaleY = rootAnimation.displayObject.scaleY;\r\n        }\r\n\r\n        let bBackgourndCloseButton = this.view.getChild(\"B_BackgroundClose\");\r\n        if(bBackgourndCloseButton) {\r\n            bBackgourndCloseButton.onClick(this, this.pop);\r\n        }\r\n\r\n        let bCloseButton = this.view.getChild(\"B_Close\");\r\n        if(bCloseButton) {\r\n            bCloseButton.onClick(this, this.pop);\r\n        }\r\n\r\n        let bOkButton = this.view.getChild(\"B_OK\");\r\n        if(bOkButton) {\r\n            bOkButton.onClick(this, this.pop);\r\n        }\r\n    }\r\n\r\n    public open(data: any) : void {\r\n        this.param = data;\r\n        this.willOpen();\r\n        this.enabled = true;\r\n        this.view.visible = true;\r\n        this.didOpen();\r\n    }\r\n\r\n    public isOpened() : boolean {\r\n        return this.enabled;\r\n    }\r\n\r\n    public willOpen() : void {\r\n\r\n        if(this._config.withBackground) {\r\n            this.uiManager.openBackground();\r\n\r\n            this.view.displayObject.scaleX = this._originScaleX;\r\n            this.view.displayObject.scaleY = this._originScaleY;\r\n            Tween.clearAll(this.view.displayObject);\r\n            Tween.from(this.view.displayObject, {\"scaleX\": 0, \"scaleY\": 0}, 388, Ease.backOut, Laya.Handler.create(this, () => {\r\n                    \r\n                console.log(\"Open Tween\");\r\n\r\n            }));\r\n        }\r\n\r\n        //console.log(\"willOpen \", rootAnimation)\r\n    }\r\n\r\n    public didOpen() : void {\r\n        //console.log(\"didOpen \", rootAnimation)\r\n    }\r\n\r\n    public forceClose() : void{\r\n        if(this._config.withBackground) {\r\n            this.uiManager.closeBackground();\r\n        }\r\n        this.willClose();\r\n        this.didClose();\r\n        this.enabled = false;\r\n        this.view.visible = false;\r\n    }\r\n\r\n    public pop() {\r\n        this.uiManager.popLastUI();\r\n    }\r\n\r\n    public popTips() {\r\n        this.uiManager.popLastTips();\r\n    }\r\n\r\n    public close() : void{\r\n        this.willClose();\r\n\r\n        if(!this._config.withBackground){\r\n            this.didClose();\r\n            this.enabled = false;\r\n            this.view.visible = false;\r\n            \r\n        } else {\r\n            Tween.clearAll(this.view.displayObject);\r\n            Tween.to(this.view.displayObject, {\"scaleX\": 0, \"scaleY\": 0}, 388, Ease.backIn, Laya.Handler.create(this, () => {\r\n                this.uiManager.closeBackground();\r\n                this.didClose();\r\n                this.enabled = false;\r\n                this.view.visible = false;\r\n            }));\r\n        }\r\n    }\r\n\r\n    public didClose() : void {\r\n\r\n    }\r\n\r\n    public willClose() : void{\r\n\r\n    }\r\n\r\n    //组件被激活后执行，此时所有节点和组件均已创建完毕，此方法只执行一次\r\n    //onAwake(): void {}\r\n\r\n    //组件被启用后执行，例如节点被添加到舞台后\r\n    //onEnable(): void {}\r\n\r\n    //组件被禁用时执行，例如从节点从舞台移除后\r\n    //onDisable(): void {}\r\n\r\n    //第一次执行update之前执行，只会执行一次\r\n    //onStart(): void {}\r\n\r\n    //手动调用节点销毁时执行\r\n    //onDestroy(): void {}\r\n\r\n    //每帧更新时执行，尽量不要在这里写大循环逻辑或者使用getComponent方法\r\n    //onUpdate(): void {\r\n        //console.log(this.constructor.name);\r\n    //}\r\n\r\n    //每帧更新时执行，在update之后执行，尽量不要在这里写大循环逻辑或者使用getComponent方法\r\n    //onLateUpdate(): void {}\r\n\r\n    //鼠标点击后执行。与交互相关的还有onMouseDown等十多个函数，具体请参阅文档。\r\n    //onMouseClick(): void {}\r\n}","import { UIBase } from \"../UIBase\";\r\n\r\nexport class UIBackground extends UIBase {\r\n\r\n    public initUI(): void {\r\n        super.initUI();\r\n        \r\n        let bBackgourndCloseButton = this.view.getChild(\"B_BackgroundCloseForBlackBG\");\r\n        if(bBackgourndCloseButton) {\r\n            bBackgourndCloseButton.onClick(this, this.closeBackground);\r\n        }\r\n    }\r\n\r\n    public closeBackground() : void{\r\n\r\n        //一般需要调用这个地方肯定是已经出错了,就这样处理了\r\n        this.uiManager.forceCloseBackground();\r\n    }\r\n}","const { regClass, property } = Laya;\r\n\r\nclass ParticlePool<T extends Particle> {\r\n    pool: T[] = [];\r\n    maxSize: number;\r\n\r\n    constructor(maxSize: number) {\r\n        this.maxSize = maxSize;\r\n    }\r\n\r\n    // 根据粒子类型从池中获取粒子\r\n    getParticle(x: number, y: number, texture: Laya.Texture, ParticleClass: new (...args: any[]) => T): T {\r\n        let particle: T;\r\n        if (this.pool.length > 0) {\r\n            // 如果池中有粒子，从池中取出并重置\r\n            particle = this.pool.pop()!;\r\n            particle.reset(x, y, texture);\r\n        } else {\r\n            particle = new ParticleClass(x, y, texture);\r\n        }\r\n        return particle;\r\n    }\r\n\r\n    // 将粒子归还到池中\r\n    returnParticle(particle: T): void {\r\n        if (this.pool.length < this.maxSize) {\r\n            this.pool.push(particle);\r\n        }\r\n    }\r\n}\r\n\r\nexport abstract class Particle {\r\n    x: number;\r\n    y: number;\r\n    vx: number;\r\n    vy: number;\r\n\r\n    life: number;\r\n    fixedLife: number;\r\n    minLife: number;\r\n    maxLife: number;\r\n    \r\n    width: number;\r\n    height:number;\r\n\r\n    size: number;\r\n    minSize: number;\r\n    maxSize: number;\r\n    alpha: number;\r\n    texture: Laya.Texture;\r\n    isLoop: boolean;          // 是否为循环粒子\r\n\r\n\r\n    constructor(x: number, y: number, texture: Laya.Texture, isLoop: boolean) {\r\n        this.reset(x, y, texture);\r\n        this.isLoop = isLoop;\r\n    }\r\n\r\n    setSize(minSize: number, maxSize: number): void {\r\n        this.minSize = minSize;\r\n        this.maxSize = maxSize;\r\n    }\r\n\r\n    setLife(minLife: number, maxLife: number): void {\r\n        this.minLife = minLife;\r\n        this.maxLife = maxLife;\r\n    }\r\n\r\n    // 重置粒子的状态\r\n    reset(x: number, y: number, texture: Laya.Texture): void {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.texture = texture;\r\n        this.width = texture.width;\r\n        this.height = texture.height;\r\n    }\r\n\r\n    // 更新粒子的状态\r\n    abstract update(): void;\r\n\r\n    // 判断粒子是否已过期\r\n    isAlive(): boolean {\r\n        return this.isLoop || (this.life > 0 && this.alpha > 0); // 循环粒子永远活着\r\n    }\r\n\r\n    // 绘制粒子\r\n    draw(sprite: Laya.Sprite): void {\r\n        sprite.graphics.drawTexture(\r\n            this.texture,\r\n            this.x - (this.width * this.size) / 2,\r\n            this.y - (this.height * this.size) / 2,\r\n            this.width * this.size,\r\n            this.height * this.size,\r\n            null,\r\n            this.alpha\r\n        );\r\n    }\r\n}\r\n\r\nclass DefaultParticle extends Particle {\r\n    \r\n    constructor(x: number, y: number, texture: Laya.Texture) {\r\n        super(x, y, texture, true); // 爆炸粒子设置为一次性粒子\r\n    }\r\n\r\n    // 重置粒子的状态\r\n    reset(x: number, y: number, texture: Laya.Texture): void {\r\n        super.reset(x, y, texture);\r\n\r\n        this.vx = Math.random() * 10 - 5;\r\n        this.vy = Math.random() * 10 - 5;\r\n        this.life = Math.random() * 100;\r\n        this.size = 0.2 + Math.random() * 0.8;\r\n        this.alpha = 1;\r\n    }\r\n\r\n    // 更新粒子的状态\r\n    update(): void {\r\n        this.x += this.vx;\r\n        this.y += this.vy;\r\n        this.life -= 1;\r\n        this.alpha -= 0.01;\r\n        //this.size -= 0.01;\r\n\r\n        if (this.isLoop && this.life <= 0) {\r\n            this.reset(0, 0, this.texture); // 重置为新的随机状态\r\n        }\r\n    }\r\n}\r\n\r\nexport class ParticleSystem<T extends Particle> {\r\n    particles: T[] = []; // 所有粒子\r\n    pool: ParticlePool<T>;\r\n    texture: Laya.Texture;\r\n    maxParticles: number;\r\n\r\n    constructor(texture: Laya.Texture, maxParticles: number) {\r\n        this.texture = texture;\r\n        this.maxParticles = maxParticles;\r\n        this.pool = new ParticlePool(maxParticles);\r\n    }\r\n\r\n    // 发射粒子（一次性或循环）\r\n    emit(x: number, y: number, ParticleClass: new (...args: any[]) => T, count: number = 1): void {\r\n        for (let i = 0; i < count; i++) {\r\n            if (this.particles.length < this.maxParticles) {\r\n                const particle = this.pool.getParticle(x, y, this.texture, ParticleClass);\r\n                this.particles.push(particle);\r\n            }\r\n        }\r\n    }\r\n\r\n    // 更新所有粒子\r\n    update(): void {\r\n        for (let i = this.particles.length - 1; i >= 0; i--) {\r\n            this.updateParticle(this.particles[i], i);\r\n        }\r\n    }\r\n\r\n    // 更新单个粒子\r\n    private updateParticle(particle: T, index: number): void {\r\n        particle.update();\r\n\r\n        if (!particle.isAlive()) {\r\n            this.pool.returnParticle(particle);\r\n            this.particles.splice(index, 1);\r\n        }\r\n    }\r\n\r\n    // 绘制所有活跃的粒子\r\n    draw(sprite: Laya.Sprite): void {\r\n        sprite.graphics.clear();\r\n        this.particles.forEach(particle => particle.draw(sprite));\r\n    }\r\n\r\n    public isAllLive(): boolean{\r\n        let isLive = false;\r\n        for (let i = this.particles.length - 1; i >= 0; i--) {\r\n            if (this.particles[i].isAlive()) {\r\n                isLive = true;\r\n                return isLive;\r\n            }\r\n        }\r\n\r\n        return isLive;\r\n    }\r\n}\r\n\r\n// @regClass()\r\n// export class ParticleExample extends Laya.Script {\r\n//     //declare owner : Laya.Sprite3D;\r\n//     //declare owner : Laya.Sprite;\r\n\r\n//     //@property(String)\r\n//     //public text: string = \"\";\r\n\r\n//     //组件被激活后执行，此时所有节点和组件均已创建完毕，此方法只执行一次\r\n//     //onAwake(): void {}\r\n\r\n//     particleSystem: ParticleSystem;\r\n//     sprite: Laya.Sprite;\r\n\r\n//     onAwake() {\r\n//         this.sprite = new Laya.Sprite();\r\n//         Laya.stage.addChild(this.sprite);\r\n\r\n//         // 加载纹理\r\n//         Laya.loader.load(\"resources/textures/common/T_Star.png\").then(res => {\r\n//             const texture = res.data;\r\n//             this.particleSystem = new ParticleSystem(texture, 20);\r\n            \r\n//             this.sprite.x = 500;\r\n//             this.sprite.y = 500;\r\n\r\n//             this.triggerLoopingEffect(0, 0);\r\n\r\n//             // 开始更新和绘制粒子系统\r\n//             Laya.timer.frameLoop(1, this, this.onParticleUpdate);\r\n//         });\r\n//     }\r\n\r\n//     // 触发一次性爆炸\r\n//     triggerExplosion(x: number, y: number): void {\r\n//         this.particleSystem.emit(x, y, \"explosion\", 10);\r\n//     }\r\n\r\n//     // 触发持续的粒子效果，例如喷泉\r\n//     triggerLoopingEffect(x: number, y: number): void {\r\n//         this.particleSystem.emit(x, y, \"random\", 10);\r\n//     }\r\n\r\n//     onParticleUpdate(): void {\r\n//         this.particleSystem.update();  // 更新粒子\r\n//         this.particleSystem.draw(this.sprite);  // 在 LayaAir 的 sprite 上绘制粒子\r\n//     }\r\n\r\n//     //组件被启用后执行，例如节点被添加到舞台后\r\n//     //onEnable(): void {}\r\n\r\n//     //组件被禁用时执行，例如从节点从舞台移除后\r\n//     //onDisable(): void {}\r\n\r\n//     //第一次执行update之前执行，只会执行一次\r\n//     //onStart(): void {}\r\n\r\n//     //手动调用节点销毁时执行\r\n//     //onDestroy(): void {}\r\n\r\n//     //每帧更新时执行，尽量不要在这里写大循环逻辑或者使用getComponent方法\r\n//     //onUpdate(): void {}\r\n\r\n//     //每帧更新时执行，在update之后执行，尽量不要在这里写大循环逻辑或者使用getComponent方法\r\n//     //onLateUpdate(): void {}\r\n\r\n//     //鼠标点击后执行。与交互相关的还有onMouseDown等十多个函数，具体请参阅文档。\r\n//     //onMouseClick(): void {}\r\n// }","import { ParticleSystem, Particle } from \"./ParticleSystem\";\r\n\r\nconst { regClass, property } = Laya;\r\n\r\nclass ExplosionParticle extends Particle {\r\n    startSize: number;\r\n    endSize: number;\r\n\r\n    startAlpha: number;\r\n    endAlpha: number;\r\n    \r\n    color: string; // 添加颜色属性\r\n    gravity: number = 0.2; // 重力效果\r\n\r\n    constructor(x: number, y: number, texture: Laya.Texture) {\r\n        super(x, y, texture, false); // 非循环粒子\r\n    }\r\n\r\n    reset(x: number, y: number, texture: Laya.Texture): void {\r\n        const randomX = (Math.random() * 150) - 75; // 随机生成位置\r\n        const randomY = (Math.random() * 150) - 75;\r\n\r\n        super.reset(randomX, randomY, texture);\r\n        this.setLife(100, 200);\r\n        this.setSize(0.5, 1);\r\n        \r\n        this.life = Math.random() * (this.maxLife - this.minLife) + this.minLife;\r\n        this.fixedLife = this.life;\r\n\r\n        const angle = Math.random() * Math.PI * 2;\r\n        const speed = Math.random() * 10 + 2;\r\n        this.vx = Math.cos(angle) * speed;\r\n        this.vy = Math.sin(angle) * speed;\r\n\r\n        this.startSize = 1;\r\n        this.endSize = 3;\r\n\r\n        this.startAlpha = 1; // 初始透明度\r\n        this.endAlpha = 0; // 结束时完全透明\r\n\r\n        // 随机生成颜色\r\n        const r = Math.random();\r\n        const g = Math.random();\r\n        const b = Math.random();\r\n        this.color = `rgba(${Math.floor(r * 255)}, ${Math.floor(g * 255)}, ${Math.floor(b * 255)}, 1)`;\r\n\r\n        this.size = this.startSize;\r\n        this.alpha = this.startAlpha;\r\n    }\r\n\r\n    update(): void {\r\n        this.x += this.vx;\r\n        this.y += this.vy;\r\n\r\n        this.vy += this.gravity; // 应用重力效果\r\n\r\n        const progress = 1 - (this.life / this.fixedLife);\r\n        this.size = this.startSize + (this.endSize - this.startSize) * progress;\r\n        this.alpha = this.startAlpha - (this.startAlpha - this.endAlpha) * progress;\r\n\r\n        this.life -= 1;\r\n\r\n        // 处理粒子生命结束\r\n        if (this.life <= 0) {\r\n            this.alpha = 0; // 完全透明\r\n        }\r\n    }\r\n\r\n    draw(sprite: Laya.Sprite): void {\r\n        sprite.graphics.drawTexture(\r\n            this.texture,\r\n            this.x - (this.width * this.size) / 2,\r\n            this.y - (this.height * this.size) / 2,\r\n            this.width * this.size,\r\n            this.height * this.size,\r\n            null,\r\n            this.alpha,\r\n            this.color\r\n        );\r\n    }\r\n}\r\n\r\n\r\n\r\n@regClass('TFSmKJ9qS7e3rXvq2nuTug')\r\nexport class FXExplosion extends Laya.Script {\r\n    //declare owner : Laya.Sprite3D;\r\n    declare owner : Laya.Sprite;\r\n    public particleSystem: ParticleSystem<ExplosionParticle>;\r\n\r\n    onStart() {\r\n        const texture = this.owner.texture;\r\n        this.owner.texture = null;\r\n        this.particleSystem = new ParticleSystem(texture, 20);\r\n        \r\n        // 开始更新和绘制粒子系统\r\n        Laya.timer.frameLoop(1, this, this.onParticleUpdate);\r\n    }\r\n\r\n    public emit(){\r\n        this.particleSystem.emit(0, 0, ExplosionParticle, 20);\r\n    }\r\n\r\n    onTextureLoaded(): void {\r\n        // 获取已加载的纹理\r\n    }\r\n\r\n    onParticleUpdate(): void {\r\n        this.particleSystem.update();  // 更新粒子\r\n        this.particleSystem.draw(this.owner);  // 在 LayaAir 的 sprite 上绘制粒子\r\n    }\r\n\r\n    //组件被激活后执行，此时所有节点和组件均已创建完毕，此方法只执行一次\r\n    //onAwake(): void {}\r\n\r\n    //组件被启用后执行，例如节点被添加到舞台后\r\n    //onEnable(): void {}\r\n\r\n    //组件被禁用时执行，例如从节点从舞台移除后\r\n    //onDisable(): void {}\r\n\r\n    //第一次执行update之前执行，只会执行一次\r\n    //onStart(): void {}\r\n\r\n    //手动调用节点销毁时执行\r\n    //onDestroy(): void {}\r\n\r\n    //每帧更新时执行，尽量不要在这里写大循环逻辑或者使用getComponent方法\r\n    //onUpdate(): void {}\r\n\r\n    //每帧更新时执行，在update之后执行，尽量不要在这里写大循环逻辑或者使用getComponent方法\r\n    //onLateUpdate(): void {}\r\n\r\n    //鼠标点击后执行。与交互相关的还有onMouseDown等十多个函数，具体请参阅文档。\r\n    //onMouseClick(): void {}\r\n}","import { SoundFXManager } from \"../../Component/SoundManager\";\r\nimport { ItemConfig } from \"../../Config/ExcelItem\";\r\nimport { FXExplosion } from \"../../Particle/FXExplosion\";\r\nimport { UIBase } from \"../UIBase\";\r\n\r\nexport class UIClaimItem extends UIBase {\r\n    \r\n    private _loaderItemIcon : fgui.GLoader;\r\n    private _imgWindow : fgui.GImage;\r\n    private _textCount : fgui.GLabel;\r\n    private _textName : fgui.GLabel;\r\n\r\n    private _originX: number;\r\n    private _originY: number;\r\n    private _fxRoot : fgui.GGraph;\r\n    private _fxExplosion: FXExplosion;\r\n\r\n    public initUI(): void {\r\n        super.initUI();\r\n\r\n        this._loaderItemIcon = this.view.getChild(\"LOADER_ItemIcon\").asLoader;\r\n        this._imgWindow = this.view.getChild(\"IMG_Window\").asImage;\r\n        this._textCount = this.view.getChild(\"TEXT_Count\").asLabel;\r\n        this._textName = this.view.getChild(\"TEXT_Name\").asLabel;\r\n        this._fxRoot = this.view.getChild(\"IMG_FXRoot\").asGraph;\r\n\r\n        this._originX = this._loaderItemIcon.displayObject.x;\r\n        this._originY = this._loaderItemIcon.displayObject.y;\r\n        \r\n        Laya.loader.load(\"resources/prefabs/fx/P_FXExplosion.lh\").then(res => {\r\n            let sprite: Laya.Sprite = res.create();\r\n            sprite.anchorX = 0.5;\r\n            sprite.anchorY = 1;\r\n\r\n            this._fxRoot.displayObject.addChild(sprite);\r\n\r\n            // 获取 icon 和 sprite 的宽高\r\n            let aWidth = this._fxRoot.displayObject.width;\r\n            let aHeight = this._fxRoot.displayObject.height;\r\n\r\n            let bWidth = sprite.width;\r\n            let bHeight = sprite.height;\r\n\r\n            // 计算宽高比例\r\n            let scaleX = aWidth / bWidth;\r\n            let scaleY = aHeight / bHeight;\r\n\r\n            // 取最小的比例来保证等比缩放\r\n            let scale = Math.min(scaleX, scaleY);\r\n\r\n            // 应用等比缩放\r\n            sprite.scale(scale, scale, true);\r\n\r\n            // 将 sprite 放置在 icon 的中心位置\r\n            sprite.pos(aWidth, aHeight / 2);\r\n\r\n            this._fxExplosion = sprite.getChildAt(0).getComponent(FXExplosion);\r\n\r\n        });\r\n    }\r\n\r\n    public didClose(): void {\r\n        super.didClose();\r\n\r\n        this.clearIcon();\r\n        this.stopIconBounceAnimation();\r\n    }\r\n\r\n    public didOpen(): void {\r\n        this.buildIcon(this.param.itemID, this.param.count);\r\n        this._fxExplosion.emit();\r\n    }\r\n\r\n    private buildIcon(itemID: string, count: number) {\r\n\r\n        const itemConfig = ItemConfig.getConfig(itemID)\r\n        if(itemConfig) {\r\n            this._loaderItemIcon.url = itemConfig.Texture;\r\n            this._loaderItemIcon.displayObject.anchorX = 0.5;\r\n            this._loaderItemIcon.displayObject.anchorY = 0.5;\r\n            this._loaderItemIcon.displayObject.x = this._originX + this._loaderItemIcon.displayObject.width * 0.5;\r\n            this._loaderItemIcon.displayObject.y = this._originY + this._loaderItemIcon.displayObject.height * 0.5;\r\n\r\n            this._textName.text = itemConfig.Name;\r\n            this._textCount.text = `x ${count}`;\r\n            this._imgWindow.color = itemConfig.Color;\r\n\r\n            this.startIconBounceAnimation();\r\n\r\n            SoundFXManager.playSoundFX(\"SFX_ClaimItem\");\r\n            SoundFXManager.playSoundFX(itemConfig.Sfx);\r\n        }\r\n    }\r\n\r\n    public clearIcon() {\r\n        this._loaderItemIcon.url = \"\";\r\n    }\r\n\r\n    // 停止跳动动画\r\n    private stopIconBounceAnimation() {\r\n        if (this._loaderItemIcon) {\r\n            Laya.Tween.clearTween(this._loaderItemIcon.displayObject); // 清除 this.icon 上的所有动画\r\n        }\r\n    }\r\n\r\n    // 给icon增加一个跳动的动画效果\r\n    private startIconBounceAnimation() {\r\n        // 首先停止之前可能存在的动画\r\n        this.stopIconBounceAnimation(); \r\n\r\n        // 动画函数：让icon缩放变大并稍微上移，带有弹力效果\r\n        const bounce1 = () => {\r\n            Laya.Tween.to(this._loaderItemIcon.displayObject, { scaleX: 1.1, scaleY: 0.8 }, 1000, Laya.Ease.linearInOut, Laya.Handler.create(this, bounce2));\r\n        };\r\n\r\n        // 动画函数：让icon缩放变小并回到原位置，带有弹力效果\r\n        const bounce2 = () => {\r\n            Laya.Tween.to(this._loaderItemIcon.displayObject, { scaleX: 1, scaleY: 1 }, 1000, Laya.Ease.linearInOut, Laya.Handler.create(this, bounce1));\r\n        };\r\n\r\n        // 开始第一次动画\r\n        bounce1();\r\n    }\r\n}","import { ConfigHelper, ConfigManager } from \"../../Config/ConfigManager\";\r\nimport { ItemConfig } from \"../../Config/ExcelItem\";\r\nimport { MachineConfig } from \"../../Config/ExcelMachine\";\r\nimport { RunTimeDataManager } from \"../../RunTimeData/RunTimeDataManager\";\r\nimport { UIBase } from \"../UIBase\";\r\nimport { UIClassName, UIDefine } from \"../UIDefine\";\r\nimport { UIManager } from \"../UIManager\";\r\n\r\nexport class UICollection extends UIBase {\r\n    \r\n    private _listCollection : fgui.GList;\r\n    private _listPageSelect : fgui.GList;\r\n    private _textMessage: fgui.GTextField;\r\n    private _maxOnePageCollectionNumber: number = 9;\r\n    private _collectionConfigList: string[] = [];\r\n    private _curDisplayList: string[] = [];\r\n\r\n    public initUI(): void {\r\n        super.initUI();\r\n\r\n        this._listCollection = this.view.getChild(\"LIST_Collection\").asList;\r\n        this._listPageSelect = this.view.getChild(\"LIST_PageSelect\").asList;\r\n        this._textMessage = this.view.getChild(\"TEXT_Message\").asTextField;\r\n\r\n        this._listPageSelect.itemRenderer = Laya.Handler.create(this, this.renderListPageSelect, null, false);\r\n        this._listPageSelect.on(fgui.Events.CLICK_ITEM, this, this.onClickListPageSelectItem);\r\n\r\n        this._listCollection.itemRenderer = Laya.Handler.create(this, this.renderListCollection, null, false);\r\n        this._listCollection.on(fgui.Events.CLICK_ITEM, this, this.onClickItem);   \r\n    }\r\n\r\n    public didOpen(): void {\r\n        super.didOpen();\r\n        const curMachineID = RunTimeDataManager.instance.runTimeData.machine_data.id;\r\n        const machineConfig = MachineConfig.getConfig(curMachineID);\r\n        const collectionList = ConfigHelper.parseStringArray(machineConfig.CollectionList)\r\n        this._collectionConfigList = collectionList;\r\n        \r\n        let collectionPageNumber = collectionList.length / this._maxOnePageCollectionNumber;\r\n        if (collectionList.length % this._maxOnePageCollectionNumber != 0) {\r\n            collectionPageNumber += 1;\r\n        }\r\n\r\n        this._listPageSelect.numItems = collectionPageNumber;\r\n        this._listPageSelect.selectedIndex = 0;\r\n        this.refreshCollectionByBageIndex(this._listPageSelect.selectedIndex);\r\n\r\n        this._textMessage.text = `You have: [color=#ffff99]${RunTimeDataManager.instance.runTimeData.machine_collection.getItemCount()}/${this._collectionConfigList.length}[/color]`\r\n    }\r\n\r\n    private renderListCollection(index: number, obj: fgui.GObject): void {\r\n        const itemConfig = ItemConfig.getConfig(this._curDisplayList[index]);\r\n        const loader = obj.asCom.getChild(\"LOADER_ItemIcon\").asLoader;\r\n        loader.url = itemConfig.Texture;\r\n        \r\n        const textCount = obj.asCom.getChild(\"TEXT_Count\").asLabel;\r\n        const count = RunTimeDataManager.instance.runTimeData.machine_collection.getItemCountById(itemConfig.ID)\r\n        if (count > 0) {\r\n            loader.color = \"#FFFFFF\";\r\n            textCount.text = \"x\" + count;\r\n        } else {\r\n            textCount.text = \"\";\r\n            loader.color = \"#000000\";\r\n        }\r\n\r\n        obj.data = itemConfig.ID;\r\n    }\r\n\r\n    private refreshCollectionByBageIndex(pageIndex: number): void {\r\n\r\n        this._listCollection.numItems = 0;\r\n        this._curDisplayList = [];\r\n\r\n        let startIndex = pageIndex * this._maxOnePageCollectionNumber;\r\n        let endIndex = (pageIndex + 1) * this._maxOnePageCollectionNumber;\r\n\r\n        for (let i = startIndex; i < endIndex; i++) {\r\n            if (i >= this._collectionConfigList.length) {\r\n                break;\r\n            }\r\n\r\n            const itemConfig = ItemConfig.getConfig(this._collectionConfigList[i]);\r\n            if (itemConfig) {\r\n                this._curDisplayList.push(this._collectionConfigList[i]);\r\n            }\r\n        }\r\n\r\n        this._listCollection.numItems = this._curDisplayList.length;\r\n    }\r\n\r\n    private onClickListPageSelectItem(): void {\r\n        this.refreshCollectionByBageIndex(this._listPageSelect.selectedIndex);\r\n    }\r\n\r\n    private onClickItem(item: fgui.GObject): void {\r\n        //console.log(\"onClickItem \" + item.data);\r\n        const itemID = item.data;\r\n        const count = RunTimeDataManager.instance.runTimeData.machine_collection.getItemCountById(itemID)\r\n        if (count > 0) {\r\n            UIManager.instance.pushUI(UIClassName.UI_ShowItem_HUD, {\r\n                itemID: itemID,\r\n                count: count\r\n            })\r\n        } else {\r\n            UIManager.instance.ShowMessageBox(\"You don't have this item\", null);\r\n        }\r\n    }\r\n\r\n    private renderListPageSelect(index: number, obj: fgui.GObject): void {\r\n\r\n        const btn = obj.asButton;\r\n\r\n        const n1 = btn.getChild(\"TEXT_N1\").asLabel;\r\n        const n2 = btn.getChild(\"TEXT_N2\").asLabel;\r\n\r\n        n1.text = \"\" + (index + 1);\r\n        n2.text = \"\" + (index + 1);\r\n    }\r\n}","import { UIBase } from \"../UIBase\";\r\n\r\nexport class UIFXCoinBackground extends UIBase {\r\n    private _fxBackGround : fgui.GImage;\r\n    private _time : number = 0;\r\n    private _offsetScale : number = 0.1;\r\n    private _isMaterialLoaded : boolean = false;\r\n    //第一次执行update之前执行，只会执行一次\r\n    onAwake(): void {\r\n        this._time = 0;\r\n        this._isMaterialLoaded = false;\r\n    }\r\n\r\n    onStart(): void {\r\n        //this._fxBackGround = this.view.getChild(\"FX_Background\").asImage;\r\n        //this._fxBackGround.visible = false;\r\n        //Laya.loader.load(\"resources/materials/M_Sprite2D_UV_Animation.lmat\", Laya.Handler.create(this, this.onLoaded));\r\n    }\r\n\r\n    // onLoaded() : void {\r\n    //     let material = Laya.loader.getRes(\"resources/materials/M_Sprite2D_UV_Animation.lmat\");\r\n    //     this._fxBackGround.displayObject.material = material;\r\n    //     this._fxBackGround.displayObject.material.setVector4(\"u_TilingOffset\", new Laya.Vector4(0.5,0.5,0,0))\r\n    //     this._isMaterialLoaded = true;\r\n    //     this._fxBackGround.visible = true;\r\n    // }\r\n\r\n    // onLateUpdate(): void {\r\n    //     if (this._isMaterialLoaded === true) {\r\n    //         let deltaTime = Laya.timer.delta / 1000;\r\n    //         this._time += deltaTime * this._offsetScale;\r\n    //         this._fxBackGround.displayObject.material.setFloat(\"u_Time\", this._time)\r\n    //         if(this._time > Number.MAX_SAFE_INTEGER) {\r\n    //             this._time = 0;\r\n    //         }\r\n    //     }\r\n    // }\r\n}","import { UIBase } from \"../UIBase\";\r\n\r\nexport class UIFXLayer extends UIBase {\r\n\r\n}","import { UIBase } from \"../UIBase\";\r\n\r\nexport class UIInviteFriends extends UIBase {\r\n\r\n}","import { UIBase } from \"../UIBase\";\r\n\r\nexport class UILoading extends UIBase {\r\n\r\n}","import { UIBase } from \"../UIBase\";\r\n\r\nexport class UIMessageBoxOne extends UIBase {\r\n\r\n    private _textMessage : fgui.GTextField;\r\n\r\n    public initUI(): void {\r\n        super.initUI();\r\n\r\n        this._textMessage = this.view.getChild(\"TEXT_Message\").asTextField;\r\n    }\r\n\r\n    public didOpen(): void {\r\n\r\n        super.didOpen();\r\n        \r\n        this._textMessage.text = this.param.content;\r\n    }\r\n}","import { CountdownTimer } from \"../../Component/CountdownTimer\";\r\nimport { SoundFXManager } from \"../../Component/SoundManager\";\r\nimport { EggConfig } from \"../../Config/ExcelEgg\";\r\nimport { Egg } from \"../../GameLogic/Egg\";\r\nimport { IncubationEntry } from \"../../RunTimeData/RunTimeData\";\r\nimport { RunTimeDataManager } from \"../../RunTimeData/RunTimeDataManager\";\r\nimport { UIBase } from \"../UIBase\";\r\n\r\nexport class UIShowEggIncuabtion extends UIBase {\r\n    \r\n    private _imgEggRoot : fgui.GGraph;\r\n    private _eggSprite: Laya.Sprite;\r\n    private _pbEggIncuabtionProgress: fgui.GProgressBar;\r\n\r\n    private _iconScale = 0;\r\n    private _iconOriginY = 0;\r\n    private _eggConfig: EggConfig;\r\n\r\n    private _textCooldownTime: fgui.GTextField;\r\n    private _countdownTimer : CountdownTimer;\r\n\r\n    private _incubationData: IncubationEntry;\r\n\r\n    public initUI(): void {\r\n        super.initUI();\r\n        \r\n        this._textCooldownTime = this.view.getChild(\"TEXT_CooldownTime\").asTextField;\r\n\r\n        this._imgEggRoot = this.view.getChild(\"IMG_EggRoot\").asGraph;\r\n        this._pbEggIncuabtionProgress = this.view.getChild(\"PB_Eggincuabtion\").asProgress;\r\n    }\r\n\r\n    public didOpen(): void {\r\n        this.setIncubationIndex(this.param.incubationIndex)\r\n    }\r\n\r\n    public setIncubationIndex(index: number): void {\r\n        const machineData = RunTimeDataManager.instance.runTimeData.machine_data;\r\n        if(machineData.incubation_list.length <= 0) {\r\n            this.pop(); return;\r\n        }\r\n\r\n        this._incubationData = machineData.incubation_list[index];\r\n        this.initIcon(this._incubationData);\r\n        this.initTimeShower();\r\n        \r\n    }\r\n\r\n    private clear(): void {\r\n\r\n        if(this._countdownTimer != null) {\r\n            this._countdownTimer.stop();\r\n            this._countdownTimer = null;\r\n        }\r\n\r\n        this._textCooldownTime.text = \"\";\r\n\r\n        // 停止跳动动画\r\n        this.stopIconBounceAnimation();\r\n\r\n        if (this._eggSprite) {\r\n            this._eggSprite.destroy();\r\n            this._eggSprite = null;\r\n        }\r\n\r\n        this._incubationData = null;\r\n    }\r\n\r\n    public didClose(): void {\r\n        super.didClose();\r\n        this.clear();\r\n    }\r\n\r\n    private initIcon(entry: IncubationEntry) {\r\n        \r\n        this._eggConfig = EggConfig.getConfig(entry.config_id);\r\n        Laya.loader.load(this._eggConfig.Prefab).then(res => {\r\n            let sprite: Laya.Sprite = res.create();\r\n            sprite.anchorX = 0.5;\r\n            sprite.anchorY = 1;\r\n\r\n            this._imgEggRoot.displayObject.addChild(sprite);\r\n\r\n            // 获取 icon 和 sprite 的宽高\r\n            let aWidth = this._imgEggRoot.displayObject.width;\r\n            let aHeight = this._imgEggRoot.displayObject.height;\r\n\r\n            let bWidth = sprite.width * 1.2;\r\n            let bHeight = sprite.height * 1.2;\r\n\r\n            // 计算宽高比例\r\n            let scaleX = aWidth / bWidth;\r\n            let scaleY = aHeight / bHeight;\r\n\r\n            // 取最小的比例来保证等比缩放\r\n            let scale = Math.min(scaleX, scaleY);\r\n\r\n            // 应用等比缩放\r\n            sprite.scale(scale, scale, true);\r\n\r\n            // 将 sprite 放置在 icon 的中心位置\r\n            sprite.pos(aWidth / 2, aHeight - 30);\r\n\r\n            //sprite.anchorY = 1;\r\n\r\n            const egg = sprite.getComponent(Egg);\r\n            egg.removeRigidBody();\r\n            \r\n            egg.eggID = entry.egg_id;\r\n            egg.init();\r\n\r\n            this._eggSprite = sprite;\r\n            this._iconScale = this._eggSprite.scaleY;\r\n            this._iconOriginY = this._eggSprite.y;\r\n            \r\n            this._pbEggIncuabtionProgress.min = 0;\r\n            this._pbEggIncuabtionProgress.max = this._eggConfig.IncubationTime;\r\n            this.startIconBounceAnimation();\r\n\r\n            SoundFXManager.playSoundFX(this._eggConfig.Sfx);\r\n        }); \r\n    }\r\n\r\n    // 停止跳动动画\r\n    private stopIconBounceAnimation() {\r\n        if (this._eggSprite) {\r\n            Laya.Tween.clearTween(this._eggSprite); // 清除 this.icon 上的所有动画\r\n        }\r\n    }\r\n\r\n    // 给icon增加一个跳动的动画效果\r\n    private startIconBounceAnimation() {\r\n        // 首先停止之前可能存在的动画\r\n        this.stopIconBounceAnimation(); \r\n\r\n        // 动画函数：让icon缩放变大并稍微上移，带有弹力效果\r\n        const bounce1 = () => {\r\n            Laya.Tween.to(this._eggSprite, { scaleX: this._iconScale * 1.1, scaleY: this._iconScale * 0.8 }, 1000, Laya.Ease.linearInOut, Laya.Handler.create(this, bounce2));\r\n        };\r\n\r\n        // 动画函数：让icon缩放变小并回到原位置，带有弹力效果\r\n        const bounce2 = () => {\r\n            Laya.Tween.to(this._eggSprite, { scaleX: this._iconScale, scaleY: this._iconScale }, 1000, Laya.Ease.linearInOut, Laya.Handler.create(this, bounce1));\r\n        };\r\n\r\n        // 开始第一次动画\r\n        bounce1();\r\n    }\r\n\r\n    initTimeShower() {\r\n\r\n        if(this._countdownTimer != null) {\r\n            this._countdownTimer.restart(this._incubationData.maturation_at.T)\r\n            return;\r\n        }\r\n\r\n        this._countdownTimer = new CountdownTimer(this._incubationData.maturation_at.T, \r\n            (remainingTime, difference) => {\r\n                this._textCooldownTime.text = `${remainingTime}`\r\n                this._pbEggIncuabtionProgress.value = difference;\r\n            },\r\n            (remainingTime, difference) => {\r\n                this._textCooldownTime.text = `${remainingTime}`\r\n                this._pbEggIncuabtionProgress.value = difference;\r\n            },\r\n            () => {\r\n                this.pop();\r\n            }\r\n        );\r\n\r\n        this._countdownTimer.start();\r\n    }\r\n}","import { ItemConfig } from \"../../Config/ExcelItem\";\r\nimport { UIBase } from \"../UIBase\";\r\n\r\nexport class UIShowItem extends UIBase {\r\n    \r\n    private _loaderItemIcon : fgui.GLoader;\r\n    \r\n    private _originX: number;\r\n    private _originY: number;\r\n    private _listStars: fgui.GList;\r\n    private _curRank: number = 0;\r\n\r\n    private _textName : fgui.GLabel;\r\n    private _textdiscription: fgui.GLabel;\r\n\r\n    public initUI(): void {\r\n        super.initUI();\r\n\r\n        this._loaderItemIcon = this.view.getChild(\"LOADER_ItemIcon\").asLoader;\r\n        this._listStars = this.view.getChild(\"LIST_Stars\").asList;\r\n        this._listStars.itemRenderer = Laya.Handler.create(this, this.renderStars, null, false);\r\n\r\n        this._textName = this.view.getChild(\"TEXT_Name\").asLabel;\r\n        this._textdiscription = this.view.getChild(\"TEXT_Discription\").asLabel;\r\n\r\n        this._originX = this._loaderItemIcon.displayObject.x;\r\n        this._originY = this._loaderItemIcon.displayObject.y;\r\n    }\r\n\r\n    public didOpen(): void {\r\n        super.didOpen();\r\n\r\n        const itemID = this.param.itemID;\r\n        this.buildDisplay(itemID, this.param.count.toString());\r\n    }\r\n\r\n    public willClose(): void {\r\n        super.willClose();\r\n\r\n        this.clearIcon();\r\n    }\r\n\r\n    public buildDisplay(itemID: string, countString: string) {\r\n\r\n        const itemConfig = ItemConfig.getConfig(itemID)\r\n        if(!itemConfig) {\r\n            return;\r\n        }\r\n\r\n        this._textName.text = `${itemConfig.Name} [color=#FFFF99]x ${countString}[/color]`;\r\n        this._textdiscription.text = itemConfig.Discription;\r\n\r\n        this._loaderItemIcon.url = itemConfig.Texture;\r\n        this._loaderItemIcon.displayObject.anchorX = 0.5;\r\n        this._loaderItemIcon.displayObject.anchorY = 0.5;\r\n        this._loaderItemIcon.displayObject.x = this._originX + this._loaderItemIcon.displayObject.width * 0.5;\r\n        this._loaderItemIcon.displayObject.y = this._originY + this._loaderItemIcon.displayObject.height * 0.5;\r\n\r\n        this.startIconBounceAnimation();\r\n\r\n        this._curRank = itemConfig.Rank;\r\n        this._listStars.numItems = 0;\r\n        this._listStars.numItems = 5;\r\n    }\r\n\r\n    public clearIcon() {\r\n        this._loaderItemIcon.url = \"\";\r\n        this.stopIconBounceAnimation(); \r\n    }\r\n\r\n    private stopIconBounceAnimation() {\r\n        if (this._loaderItemIcon) {\r\n            Laya.Tween.clearTween(this._loaderItemIcon.displayObject); // 清除 this.icon 上的所有动画\r\n        }\r\n    }\r\n\r\n    private renderStars(index: number, item: fgui.GObject) {\r\n        if (this._curRank -1 >= index)\r\n        {\r\n            item.asCom.getChild(\"IMAGE_Star\").asGraph.color = \"#FFFF99\";\r\n        }\r\n    }\r\n\r\n    // 给icon增加一个跳动的动画效果\r\n    private startIconBounceAnimation() {\r\n        // 首先停止之前可能存在的动画\r\n        this.stopIconBounceAnimation(); \r\n\r\n        // 动画函数：让icon缩放变大并稍微上移，带有弹力效果\r\n        const bounce1 = () => {\r\n            Laya.Tween.to(this._loaderItemIcon.displayObject, { scaleX: 1.1, scaleY: 0.95 }, 1000, Laya.Ease.linearInOut, Laya.Handler.create(this, bounce2));\r\n        };\r\n\r\n        // 动画函数：让icon缩放变小并回到原位置，带有弹力效果\r\n        const bounce2 = () => {\r\n            Laya.Tween.to(this._loaderItemIcon.displayObject, { scaleX: 1, scaleY: 1 }, 1000, Laya.Ease.linearInOut, Laya.Handler.create(this, bounce1));\r\n        };\r\n\r\n        // 开始第一次动画\r\n        bounce1();\r\n    }\r\n}","import { UIBase } from \"../UIBase\";\r\n\r\nexport class UITask extends UIBase {\r\n\r\n}","import { UIBase } from \"../UIBase\";\r\nimport Tween = Laya.Tween;\r\nimport Ease = Laya.Ease;\r\nimport Handler = Laya.Handler;\r\n\r\nexport class UITips extends UIBase {\r\n    private _textMessage : fgui.GTextField;\r\n    private _originY: number = 0;\r\n\r\n    public initUI() : void{\r\n\r\n        super.initUI();\r\n        \r\n        this._textMessage = this.view.getChild(\"TEXT_Message\").asTextField;\r\n        this._originY = this.view.displayObject.y;\r\n        \r\n    }\r\n\r\n    // public setMessage(message : string) : void {\r\n    //     this._textMessage.text = message;u\r\n    // }\r\n\r\n    public didClose(): void {\r\n        super.didClose();\r\n        Tween.clearAll(this.view.displayObject);\r\n        Laya.timer.clearAll(this);\r\n    }\r\n\r\n    public didOpen(): void {\r\n\r\n        super.didOpen();\r\n        \r\n        this._textMessage.text = this.param.content;\r\n\r\n        this.view.displayObject.y = this._originY;\r\n        Tween.from(this.view.displayObject, {\"y\": -100}, 600, Ease.backOut, Handler.create(this, () => {  \r\n\r\n            Laya.timer.once(2000, this, () => {  \r\n\r\n                Tween.to(this.view.displayObject, {\"y\": -100}, 600, Ease.backIn, Handler.create(this, () => {  \r\n\r\n                    this.popTips();\r\n                \r\n                }));\r\n            \r\n            });\r\n\r\n        }));\r\n    }\r\n}","import { RunTimeDataManager } from \"../RunTimeData/RunTimeDataManager\";\r\n\r\nconst { regClass, property } = Laya;\r\n\r\n@regClass('DGCskiILRi65QciOt7TFbg')\r\nexport class HttpManager extends Laya.Script {  \r\n    private static _instance: HttpManager;  \r\n  \r\n    public static get instance(): HttpManager {  \r\n        if (!HttpManager._instance) {  \r\n            return null;\r\n        }  \r\n        return HttpManager._instance;  \r\n    }  \r\n  \r\n    private _session: string;\r\n\r\n    constructor() {  \r\n        super();  \r\n    }\r\n  \r\n    //private baseUrl: string = \"http://127.0.0.1:9100\";  // 替换为你的服务器 API 基础 URL  \r\n    private baseUrl: string = \"https://seed-test.9x9168.com:9100\";  // 替换为你的服务器 API 基础 URL \r\n  \r\n    public get(endpoint: string, params: Object = {}, callback: Function, errorCallback: Function = null, progressCallback: Function = null): void {  \r\n        const url = this.buildUrl(endpoint, params);  \r\n        const httpRequest = new Laya.HttpRequest();  \r\n        \r\n        httpRequest.once(Laya.Event.COMPLETE, self, (evt:any)=>{\r\n            //console.log(evt);\r\n            if (evt.err_no != 0)  {\r\n                if(errorCallback) {\r\n                    errorCallback(evt.data);\r\n                }\r\n                return;\r\n            }\r\n\r\n            RunTimeDataManager.instance.saveData(evt.data);\r\n            if(callback) {\r\n                callback(evt.data);\r\n            }\r\n        });\r\n\r\n        httpRequest.once(Laya.Event.ERROR, self, (error:any)=>{\r\n            //console.log(error);\r\n            if(errorCallback) {\r\n                errorCallback(error.data);\r\n            }\r\n        });\r\n\r\n        httpRequest.on(Laya.Event.PROGRESS, self, (evt:any)=>{\r\n            //console.log(evt);\r\n            if(progressCallback) {\r\n                progressCallback(evt.data);\r\n            }\r\n        });\r\n\r\n        const headers = this._session ? [\"Authorization\", \"\" + this._session] : [];\r\n        httpRequest.send(url, null, \"get\", \"json\", headers);\r\n    }  \r\n  \r\n    public post(endpoint: string, data: Object, callback: Function, errorCallback: Function = null, progressCallback: Function = null): void {  \r\n        const url = this.baseUrl + endpoint;  \r\n        const httpRequest = new Laya.HttpRequest();  \r\n        \r\n        httpRequest.http.timeout = 10000;\r\n        //send(url: string, data?: any, method?: \"get\" | \"post\" | \"head\", responseType?: \"text\" | \"json\" | \"xml\" | \"arraybuffer\", headers?: string[]): void;\r\n        httpRequest.once(Laya.Event.COMPLETE, self, (evt:any)=>{\r\n \r\n            if(evt.data != null && evt.data.game_session != null){\r\n                this._session = evt.data.game_session;\r\n            }\r\n            \r\n            if (evt.err_no != 0) {\r\n                if(errorCallback) {\r\n                    errorCallback(evt.err_msg);\r\n                }\r\n                return;\r\n            }\r\n\r\n            RunTimeDataManager.instance.saveData(evt.data);\r\n            \r\n            if(callback) {\r\n                callback(evt.data);\r\n            }\r\n        });\r\n\r\n        httpRequest.once(Laya.Event.ERROR, self, (error:any)=>{\r\n            //console.log(error);\r\n            if(errorCallback) {\r\n                errorCallback(error.data);\r\n            }\r\n            \r\n        });\r\n\r\n        httpRequest.once(Laya.Event.PROGRESS, self, (data:any)=>{\r\n            //console.log(evt);\r\n            if(progressCallback) {\r\n                progressCallback(data.data);\r\n            }\r\n        });\r\n\r\n        const headers = this._session ? [\"Authorization\", \"\" + this._session] : [];\r\n        httpRequest.send(url, data, \"post\", \"json\", headers);\r\n    }  \r\n\r\n    private buildUrl(endpoint: string, params: Object): string {  \r\n        let url = this.baseUrl + endpoint;  \r\n        const queryString = Object.keys(params)  \r\n            .map(key => `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`)  \r\n            .join('&');  \r\n          \r\n        if (queryString) {  \r\n            url += '?' + queryString;  \r\n        }\r\n          \r\n        return url;  \r\n    }\r\n\r\n    onAwake(): void {\r\n        if (HttpManager._instance) {\r\n            throw new Error(\"Singleton class. Use getInstance() instead.\");\r\n        }\r\n        HttpManager._instance = this;\r\n    }\r\n}\r\n\r\n// 定义一个辅助函数，将回调函数转换为返回 Promise 的形式  \r\nexport function postWithPromise(httpManager: HttpManager, url: string, data: any): Promise<any> {  \r\n    return new Promise((resolve, reject) => {  \r\n        httpManager.post(url, data, (response: any) => {  \r\n            resolve(response);  \r\n        }, (error: any) => {  \r\n            reject(error);  \r\n        });  \r\n    });  \r\n}  \r\n\r\nexport function getWithPromise(httpManager: HttpManager, url: string, params: any): Promise<any> {  \r\n    return new Promise((resolve, reject) => {  \r\n        httpManager.get(url, params, (response: any) => {  \r\n            resolve(response);  \r\n        }, (error: any) => {  \r\n            reject(error);  \r\n        });  \r\n    });  \r\n}  ","\r\nimport { SoundFXManager } from \"../../Component/SoundManager\";\r\nimport { ConfigHelper } from \"../../Config/ConfigManager\";\r\nimport { MachineConfig } from \"../../Config/ExcelMachine\";\r\nimport { HttpURL } from \"../../Http/HttpDefine\";\r\nimport { HttpManager } from \"../../Http/HttpManager\";\r\nimport { RunTimeDataManager } from \"../../RunTimeData/RunTimeDataManager\";\r\nimport { UIBase } from \"../UIBase\";\r\nimport { UIManager } from \"../UIManager\";\r\n\r\nexport class UIUnlockEggIncuabtion extends UIBase {\r\n    \r\n    private _bPointUnlock : fgui.GButton;\r\n    private _bGemUnlock : fgui.GButton;\r\n    \r\n    public initUI(): void {\r\n        super.initUI();\r\n\r\n        this._bPointUnlock = this.view.getChild(\"B_PointUnlock\").asButton;\r\n        this._bPointUnlock.onClick(this, ()=>{\r\n            this.onUnlock();\r\n        });\r\n\r\n        this._bGemUnlock = this.view.getChild(\"B_GemUnlock\").asButton;\r\n        this._bGemUnlock.onClick(this, ()=>{\r\n            this.onUnlock();\r\n        });   \r\n    }\r\n\r\n    public onUnlock(){\r\n\r\n        const machineData = RunTimeDataManager.instance.runTimeData.machine_data\r\n        //发送网络消息\r\n        const params = {\r\n            \"machine_id\": machineData.id,\r\n        }\r\n\r\n        HttpManager.instance.post(HttpURL.unlock_egg_incubation, params, (response: any) => {  \r\n\r\n            RunTimeDataManager.instance.machine.updateDisplay();\r\n\r\n            UIManager.instance.popLastUI();\r\n            UIManager.instance.ShowMessageBox(\"successfully!\", null);\r\n            SoundFXManager.playSoundFX(\"SFX_UnlockEggIncuabtion\");\r\n            //this.updateDisplay();\r\n            //这里要打开一个收获页面\r\n            //this.handleHarvestEgg(response, worldPos.x, worldPos.y);\r\n\r\n        }, (error: any) => {  \r\n            UIManager.instance.ShowMessageBox(error, null);\r\n        }); \r\n    }\r\n\r\n    public didOpen(): void {\r\n        super.didOpen();\r\n\r\n        const machineData = RunTimeDataManager.instance.runTimeData.machine_data;\r\n        const nowSlotCount = machineData.getIncubationDataCount();\r\n        \r\n        const machineConfig = MachineConfig.getConfig(machineData.id)\r\n        const unlockIncubatorCost = ConfigHelper.parseStringArray(machineConfig.UnlockIncubatorCost);\r\n        const symbol = unlockIncubatorCost[nowSlotCount * 2]\r\n        const cost = unlockIncubatorCost[nowSlotCount * 2 + 1]\r\n\r\n        switch (symbol) {\r\n            case \"point\":\r\n                this._bPointUnlock.visible = true;\r\n                this._bGemUnlock.visible = false;\r\n                this._bPointUnlock.getChild(\"title0\").asTextField.text = cost;\r\n                this._bPointUnlock.getChild(\"title1\").asTextField.text = cost;\r\n                break;\r\n            case \"gem\":\r\n                this._bPointUnlock.visible = false;\r\n                this._bGemUnlock.visible = true;\r\n                this._bGemUnlock.getChild(\"title0\").asTextField.text = cost;\r\n                this._bGemUnlock.getChild(\"title1\").asTextField.text = cost;\r\n                break;\r\n        }\r\n\r\n        \r\n\r\n    }\r\n}","import { UIBackground } from \"./HUD/UIBackground\";\r\nimport { UIClaimItem } from \"./HUD/UIClaimItem\";\r\nimport { UICollection } from \"./HUD/UICollection\";\r\nimport { UIFXCoinBackground } from \"./HUD/UIFXCoinBackground\";\r\nimport { UIFXLayer } from \"./HUD/UIFXLayer\";\r\nimport { UIInviteFriends } from \"./HUD/UIInviteFriends\";\r\nimport { UILoading } from \"./HUD/UILoading\";\r\nimport { UIMessageBoxOne } from \"./HUD/UIMessageBoxOne\";\r\nimport { UIShowEggIncuabtion } from \"./HUD/UIShowEggIncuabtion\";\r\nimport { UIShowItem } from \"./HUD/UIShowItem\";\r\nimport { UITask } from \"./HUD/UITask\";\r\nimport { UITips } from \"./HUD/UITips\";\r\nimport { UIUnlockEggIncuabtion } from \"./HUD/UIUnlockEggIncuabtion\";\r\nimport { UIBase } from \"./UIBase\";\r\n\r\ntype UIClassMap = {  \r\n    [key: string]: new () => UIBase;\r\n};\r\n\r\nexport enum UIClassName {  \r\n    UI_FX_Layer_HUD = \"UI_FX_Layer_HUD\",  \r\n    UI_Loading_HUD = \"UI_Loading_HUD\",  \r\n    UI_MessageBoxOne_HUD = \"UI_MessageBoxOne_HUD\",  \r\n    UI_Invite_Friends_HUD = \"UI_Invite_Friends_HUD\",  \r\n    UI_FX_Coin_Background_HUD = \"UI_FX_Coin_Background_HUD\",  \r\n    UI_Tips_HUD = \"UI_Tips_HUD\",  \r\n    UI_Task_HUD = \"UI_Task_HUD\",  \r\n    UI_Background_HUD = \"UI_Background_HUD\",  \r\n    UI_ShowItem_HUD = \"UI_ShowItem_HUD\",\r\n    UI_ShowEggIncuabtion_HUD = \"UI_ShowEggIncuabtion_HUD\",\r\n    UI_UnlockEggIncuabtion_HUD = \"UI_UnlockEggIncuabtion_HUD\",\r\n    UI_Collection_HUD = \"UI_Collection_HUD\",\r\n    UI_ClaimItem_HUD = \"UI_ClaimItem_HUD\"\r\n} \r\n\r\nexport class UIDefine {\r\n    \r\n    private _classMap: UIClassMap = {  \r\n        \"UI_FX_Layer_HUD\": UIFXLayer,\r\n        \"UI_Loading_HUD\": UILoading,\r\n        \"UI_MessageBoxOne_HUD\": UIMessageBoxOne,\r\n        \"UI_Invite_Friends_HUD\": UIInviteFriends,\r\n        \"UI_FX_Coin_Background_HUD\": UIFXCoinBackground,\r\n        \"UI_Tips_HUD\": UITips,\r\n        \"UI_Task_HUD\": UITask,\r\n        \"UI_Background_HUD\":UIBackground,\r\n        \"UI_ShowItem_HUD\":UIShowItem,\r\n        \"UI_ShowEggIncuabtion_HUD\":UIShowEggIncuabtion,\r\n        \"UI_UnlockEggIncuabtion_HUD\":UIUnlockEggIncuabtion,\r\n        \"UI_Collection_HUD\":UICollection,\r\n        \"UI_ClaimItem_HUD\":UIClaimItem\r\n    }; \r\n\r\n    public instantiate(className: string): UIBase | undefined {  \r\n        const clazz = this._classMap[className];  \r\n        return clazz ? new clazz() : undefined;  \r\n    }\r\n}\r\n\r\n","import { SystemDefine } from \"../SystemDefine\";\r\nimport { UIMessageBoxOne } from \"./HUD/UIMessageBoxOne\";\r\nimport { UITips } from \"./HUD/UITips\";\r\nimport { UIBase } from \"./UIBase\";\r\nimport { UIClassName, UIDefine } from \"./UIDefine\";\r\n\r\nconst { regClass, property } = Laya;\r\n\r\ninterface UIQueueBase {\r\n    name: string;\r\n    data: any;\r\n} \r\n\r\n@regClass('G_pKT3cPTh-KsbcmdsUFMg')\r\nexport class UIManager extends Laya.Script {\r\n    //declare owner : Laya.Sprite3D;\r\n    //declare owner : Laya.Sprite;\r\n    public ownerPanel: Laya.Box;\r\n\r\n    private static _instance: UIManager;  \r\n    \r\n    private _uiConfigData: any;\r\n    private _viewsDictionary: { [key: string]: fgui.GComponent } = {}; \r\n    private _uibaseDictionary: { [key: string]: UIBase } = {}; \r\n    private _uiDefine: UIDefine\r\n    private _initialized: boolean = false;\r\n    private _isBackgroundOpen: number = 0;\r\n    public pageWidth: number;\r\n    public pageHeight: number;\r\n\r\n    // 队列用于管理打开的 UI\r\n    private _uiQueue: UIQueueBase[] = [];\r\n    private _tipsQueue: UIQueueBase[] = [];\r\n\r\n    constructor() {  \r\n        super();\r\n\r\n        this.pageWidth = Laya.stage.designHeight * Laya.Browser.clientWidth / Laya.Browser.clientHeight;\r\n        this.pageHeight = Laya.stage.designHeight;\r\n    }\r\n\r\n    public static get instance(): UIManager {  \r\n        if (!UIManager._instance) {  \r\n            return null;\r\n        }  \r\n        return UIManager._instance;  \r\n    }  \r\n\r\n    public get initialized(): boolean {\r\n        return this._initialized;\r\n    }\r\n\r\n    //组件被激活后执行，此时所有节点和组件均已创建完毕，此方法只执行一次\r\n    onAwake(): void {\r\n        if (UIManager._instance) {  \r\n            throw new Error(\"Singleton class. Use getInstance() instead.\");\r\n        }  \r\n\r\n        UIManager._instance = this\r\n        this.ownerPanel = this.owner as Laya.Panel; \r\n    }\r\n\r\n    init(): void {\r\n        this._uiDefine = new UIDefine();\r\n\r\n        this.initFont();\r\n        \r\n        Laya.loader.load(\"resources/prefabs/ui/P_UIRoot.lh\").then(res => {\r\n            let sprite : Laya.Sprite = res.create();\r\n            this.ownerPanel.addChild(sprite);\r\n\r\n            sprite.addChild(fgui.GRoot.inst.displayObject);\r\n            sprite.zOrder = 100;\r\n            sprite.width = this.pageWidth;\r\n            //console.log(\"sprite.width = \" + sprite.width);\r\n\r\n            Laya.loader.load(\"resources/json/Data_UI_Config.json\").then(res => {\r\n                \r\n                //const uiConfigDataRes = Laya.loader.getRes(\"resources/json/Data_UI_Config.json\");\r\n                this._uiConfigData = res.data;\r\n                let packageList: string[] = [];\r\n                for (let i = 0; i < this._uiConfigData.packageConfigs.length; i++) {  \r\n                    const packageName = this._uiConfigData.packageConfigs[i];  \r\n                    packageList.push(this._uiConfigData.uiBasePath + packageName);\r\n                }\r\n    \r\n                fgui.UIPackage.loadPackage(packageList, Laya.Handler.create(this, this.onUILoaded));\r\n            });\r\n\r\n        });  \r\n    }\r\n\r\n    initFont(): void {\r\n        fairygui.UIConfig.defaultFont = \"TitanOne-Regular\";\r\n        Laya.loader.load(`resources/font/TitanOne-Regular.ttf`, Laya.Handler.create(this, (ttf: { [x: string]: any; }) => {\r\n            fairygui.UIConfig.defaultFont = ttf['fontName'];\r\n            Laya.Text.defaultFont = ttf['fontName'];\r\n        }), null, Laya.Loader.TTF);\r\n    }\r\n\r\n    onUILoaded() {\r\n        \r\n        for (let i = 0; i < this._uiConfigData.uiConfigs.length; i++) {  \r\n            const config = this._uiConfigData.uiConfigs[i];  \r\n            let view = fgui.UIPackage.createObject(config.uiPackage, config.uiName).asCom;\r\n            view.makeFullScreen();\r\n            //view.visible = false;\r\n            view.sortingOrder = config.layer;\r\n            fgui.GRoot.inst.addChild(view);\r\n            \r\n            let uiClass = this._uiDefine.instantiate(config.uiName)\r\n            if (uiClass) {\r\n                let component = view.displayObject.addComponentInstance(uiClass);\r\n                if(!component) {\r\n                    console.error(\"Component not found: \" + config.uiName);\r\n                }\r\n                uiClass.uiManager = this;\r\n                uiClass.view = view;\r\n                uiClass.config = config;\r\n                uiClass.initUI();\r\n                uiClass.forceClose();\r\n                this._uibaseDictionary[config.uiName] = uiClass;\r\n            } else {\r\n                console.error(\"UIBase not found: \" + config.uiName);\r\n            }\r\n            \r\n            this._viewsDictionary[config.uiName] = view;\r\n        }\r\n\r\n        this._initialized = true;\r\n    }\r\n\r\n\r\n    public pushUI(name : string, data: any): void\r\n    {\r\n        if (this._uibaseDictionary[name]) {\r\n\r\n            if (this._uiQueue.length > 0) {\r\n                const lastUI = this._uiQueue[this._uiQueue.length - 1];\r\n                this.forceCloseUI(lastUI.name);\r\n            }\r\n\r\n            this._uiQueue.push({\r\n                name: name,\r\n                data: data\r\n            });\r\n\r\n            this.openUI(name, data);\r\n        }\r\n    }\r\n\r\n    public popLastUI(): void\r\n    {\r\n        if (this._uiQueue.length > 0) {\r\n            const lastUI = this._uiQueue.pop();\r\n        \r\n            //在移除一个之后还有一个的话\r\n            if (this._uiQueue.length > 0) {\r\n                this.forceCloseUI(lastUI.name);\r\n\r\n                const nextUI = this._uiQueue[this._uiQueue.length - 1];\r\n                this.openUI(nextUI.name, nextUI.data);\r\n            } else {\r\n                this.closeUI(lastUI.name);\r\n            }\r\n        }\r\n    }\r\n\r\n    public pushTips(name : string, data: any): void\r\n    {\r\n        if (this._uibaseDictionary[name]) {\r\n\r\n            if (this._tipsQueue.length > 0) {\r\n                const lastUI = this._tipsQueue[this._tipsQueue.length - 1];\r\n                this.forceCloseUI(lastUI.name);\r\n            }\r\n\r\n            this._tipsQueue.push({\r\n                name: name,\r\n                data: data\r\n            });\r\n\r\n            this.openUI(name, data);\r\n        }\r\n    }\r\n\r\n    public popLastTips(): void\r\n    {\r\n        if (this._tipsQueue.length > 0) {\r\n            const lastUI = this._tipsQueue.pop();\r\n\r\n            //在移除一个之后还有一个的话\r\n            if (this._tipsQueue.length > 0) {\r\n                this.forceCloseUI(lastUI.name); \r\n\r\n                const nextUI = this._tipsQueue[this._tipsQueue.length - 1];\r\n                this.openUI(nextUI.name, nextUI.data);\r\n            } else {\r\n                this.closeUI(lastUI.name); \r\n            }\r\n        }\r\n    }\r\n\r\n    //外部使用push和pop不要用open和close\r\n    private openUI(name : string, data: any) : UIBase{\r\n        if (this._uibaseDictionary[name]) {  \r\n            this._uibaseDictionary[name].open(data);\r\n            return this._uibaseDictionary[name];\r\n        } else {  \r\n            console.error(\"View not found: \" + name);  \r\n            return null;\r\n        }\r\n    }\r\n\r\n    //外部使用push和pop不要用open和close\r\n    private closeUI(name : string) : void{\r\n        if (this._uibaseDictionary[name]) {  \r\n            this._uibaseDictionary[name].close();  \r\n        } else {  \r\n            console.error(\"View not found: \" + name);  \r\n        }  \r\n    }\r\n\r\n    private forceCloseUI(name : string) : void{\r\n        if (this._uibaseDictionary[name]) {  \r\n            this._uibaseDictionary[name].forceClose();  \r\n        } else {  \r\n            console.error(\"View not found: \" + name);  \r\n        }  \r\n    }\r\n\r\n    public isOpenedUI(name : string) : boolean{\r\n        if (this._uibaseDictionary[name]) {  \r\n            return this._uibaseDictionary[name].isOpened();  \r\n        } else {  \r\n            console.error(\"View not found: \" + name);  \r\n            return false;\r\n        }  \r\n    }\r\n\r\n    public openBackground() : void{\r\n        \r\n        this._isBackgroundOpen++;\r\n\r\n        //console.log(\"this._isBackgroundOpen = \" + this._isBackgroundOpen);\r\n\r\n        this.openUI(\"UI_Background_HUD\", null);\r\n    }\r\n\r\n    public closeBackground() : void {\r\n\r\n        this._isBackgroundOpen--;\r\n\r\n        //console.log(\"this._isBackgroundClose = \" + this._isBackgroundOpen);\r\n\r\n        if(this._isBackgroundOpen <= 0)\r\n        {\r\n            this._isBackgroundOpen = 0;\r\n            this.closeUI(\"UI_Background_HUD\");\r\n        }\r\n    }\r\n\r\n    public forceCloseBackground() : void {\r\n        this._isBackgroundOpen = 0;\r\n        this.forceCloseUI(\"UI_Background_HUD\");\r\n    }\r\n\r\n    public ShowTips(content: string)\r\n    {   \r\n        this.pushTips(UIClassName.UI_Tips_HUD, {\r\n            content: content\r\n        });\r\n    } \r\n\r\n    public ShowMessageBox(content: string, callback: Function) : void{\r\n        this.pushUI(UIClassName.UI_MessageBoxOne_HUD, {\r\n            content: content,\r\n            callback: callback\r\n        });\r\n    }\r\n\r\n    //组件被启用后执行，例如节点被添加到舞台后\r\n    //onEnable(): void {}\r\n\r\n    //组件被禁用时执行，例如从节点从舞台移除后\r\n    //onDisable(): void {}\r\n\r\n    //第一次执行update之前执行，只会执行一次\r\n    //onStart(): void {}\r\n\r\n    //手动调用节点销毁时执行\r\n    //onDestroy(): void {}\r\n\r\n    //每帧更新时执行，尽量不要在这里写大循环逻辑或者使用getComponent方法\r\n    //onUpdate(): void {}\r\n\r\n    //每帧更新时执行，在update之后执行，尽量不要在这里写大循环逻辑或者使用getComponent方法\r\n    //onLateUpdate(): void {}\r\n\r\n    //鼠标点击后执行。与交互相关的还有onMouseDown等十多个函数，具体请参阅文档。\r\n    //onMouseClick(): void {}\r\n}","const { regClass, property } = Laya;\r\nimport { IncubationEntry } from \"../RunTimeData/RunTimeData\";\r\nimport Label = Laya.Label;\r\nimport Button = Laya.Button;\r\nimport Sprite = Laya.Sprite;\r\nimport Event = Laya.Event;\r\nimport Point = Laya.Point;\r\nimport { CountdownTimer } from \"../Component/CountdownTimer\";\r\nimport { EggConfig } from \"../Config/ExcelEgg\";\r\nimport { Egg } from \"./Egg\";\r\nimport { UIManager } from \"../UI/UIManager\";\r\nimport { UIClassName } from \"../UI/UIDefine\";\r\nimport { UIShowEggIncuabtion } from \"../UI/HUD/UIShowEggIncuabtion\";\r\nimport { SoundFXManager } from \"../Component/SoundManager\";\r\n\r\nexport enum IncubationSlotState {\r\n    None,\r\n    LOCK,\r\n    EMPTY,\r\n    INCUBATION,\r\n    READY,\r\n}\r\n\r\n@regClass('-k2-SsuaRu2uvaXAK8ZJzQ')\r\nexport class IncubationSlot extends Laya.Script {\r\n    //declare owner : Laya.Sprite3D;\r\n    declare owner : Laya.Sprite;\r\n    public index: number = 0;\r\n    private _curState : IncubationSlotState = IncubationSlotState.None;\r\n\r\n    @property(Label)\r\n    public textCooldownTime: Label;\r\n    private _countdownTimer : CountdownTimer;\r\n    \r\n    @property(Button)\r\n    public bReady: Button;\r\n\r\n    @property(Button)\r\n    public bUnlock: Button;\r\n\r\n    @property(Button)\r\n    public bInfo: Button;\r\n\r\n    @property(Sprite)\r\n    public icon: Sprite;\r\n    private _iconScale = 0;\r\n    private _iconOriginY = 0;\r\n\r\n    public onHarvestEggCallback: (soltIndex: number, worldPos: Point) => void; \r\n    private _incubationEntry: IncubationEntry;\r\n    private _curEgg: Egg;\r\n    \r\n    //组件被激活后执行，此时所有节点和组件均已创建完毕，此方法只执行一次\r\n    onAwake(): void {\r\n\r\n\r\n        this.setState(IncubationSlotState.LOCK);\r\n        this.bReady.on(Event.CLICK, this, this.onClickReady);\r\n        this.bInfo.on(Event.CLICK, this, this.onClickInfo);\r\n        this.bUnlock.on(Event.CLICK, this, this.onClickUnlock);\r\n    }\r\n\r\n    //组件被启用后执行，例如节点被添加到舞台后\r\n    //onEnable(): void {}\r\n\r\n    //组件被禁用时执行，例如从节点从舞台移除后\r\n    //onDisable(): void {}\r\n\r\n    //第一次执行update之前执行，只会执行一次\r\n    onStart(): void {\r\n        \r\n    }\r\n\r\n    onClickInfo(e: Event = null) {\r\n        SoundFXManager.playSoundFX(\"SFX_ButtonClick01\");\r\n        //console.log(\"Click Ready\");\r\n        if (this._curState != IncubationSlotState.INCUBATION) return;\r\n\r\n        UIManager.instance.pushUI(UIClassName.UI_ShowEggIncuabtion_HUD, {\r\n            incubationIndex: this.index\r\n        });\r\n    }\r\n\r\n    onClickReady(e: Event = null) {\r\n        SoundFXManager.playSoundFX(\"SFX_ButtonClick01\");\r\n        //console.log(\"Click Ready\");\r\n\r\n        let worldPos: Point = Point.create();\r\n        worldPos.x = this.icon.width * this.icon.anchorX;\r\n        worldPos.y = this.icon.height * this.icon.anchorY;\r\n        worldPos = this.icon.localToGlobal(worldPos);\r\n\r\n        if(this.onHarvestEggCallback != null){\r\n            this.onHarvestEggCallback(this.index, worldPos);\r\n        }\r\n    }\r\n\r\n    onClickUnlock(e: Event = null) {\r\n        SoundFXManager.playSoundFX(\"SFX_ButtonClick01\");\r\n        //console.log(\"Click Ready\");\r\n        if (this._curState != IncubationSlotState.LOCK) return;\r\n\r\n        UIManager.instance.pushUI(UIClassName.UI_UnlockEggIncuabtion_HUD, null);\r\n    }\r\n\r\n    setState(state: IncubationSlotState) {\r\n\r\n        if(this._curState == state) return;\r\n\r\n        switch (state) {\r\n            case IncubationSlotState.LOCK:\r\n                this.bReady.visible = false;\r\n                this.bUnlock.visible = true;\r\n                this.icon.visible = false;\r\n                this.textCooldownTime.visible = false;\r\n                this.clear();\r\n                break;\r\n            case IncubationSlotState.EMPTY:\r\n                this.bReady.visible = false;\r\n                this.bUnlock.visible = false;\r\n                this.icon.visible = false;\r\n                this.textCooldownTime.visible = false;\r\n                this.clear();\r\n                break;\r\n            case IncubationSlotState.INCUBATION:\r\n                this.bReady.visible = false;\r\n                this.bUnlock.visible = false;\r\n                this.icon.visible = true;\r\n                this.textCooldownTime.visible = true;\r\n                this.initTimeShower();\r\n                this.initIcon();\r\n                break;\r\n            case IncubationSlotState.READY:\r\n                this.bReady.visible = true;\r\n                this.bUnlock.visible = false;\r\n                this.icon.visible = true;\r\n                this.textCooldownTime.visible = false;\r\n                this.initIcon();\r\n                this.startIconBounceAnimationReady();\r\n                break;\r\n        }\r\n\r\n        this._curState = state;\r\n    }\r\n\r\n    clear() {\r\n        if(this._countdownTimer != null) {\r\n            this._countdownTimer.stop();\r\n            this._countdownTimer = null;\r\n        }\r\n\r\n        this.textCooldownTime.text = \"\";\r\n\r\n        // 停止跳动动画\r\n        this.stopIconBounceAnimation();\r\n\r\n        if(this._curEgg != null) {\r\n            this._curEgg.owner.destroy();\r\n            this._curEgg = null;\r\n        }\r\n    }\r\n\r\n    initIcon() {\r\n        if(this._curEgg != null) return;\r\n\r\n        const eggConfig = EggConfig.getConfig(this._incubationEntry.config_id);\r\n        Laya.loader.load(eggConfig.Prefab).then(res => {\r\n            let sprite: Laya.Sprite = res.create();\r\n            sprite.anchorX = 0.5;\r\n            sprite.anchorY = 0.5;\r\n\r\n            this.icon.addChild(sprite);\r\n\r\n            // 获取 icon 和 sprite 的宽高\r\n            let aWidth = this.icon.width;\r\n            let aHeight = this.icon.height;\r\n\r\n            let bWidth = sprite.width * 1.2;\r\n            let bHeight = sprite.height * 1.2;\r\n\r\n            // 计算宽高比例\r\n            let scaleX = aWidth / bWidth;\r\n            let scaleY = aHeight / bHeight;\r\n\r\n            // 取最小的比例来保证等比缩放\r\n            let scale = Math.min(scaleX, scaleY);\r\n\r\n            // 应用等比缩放\r\n            sprite.scale(scale, scale, true);\r\n\r\n            // 将 sprite 放置在 icon 的中心位置\r\n            //sprite.pos(aWidth / 2, aHeight / 2);\r\n            \r\n            // 将 sprite 放置在 icon 的中心位置\r\n            sprite.pos(aWidth / 2, aHeight / 2 + 80);\r\n            sprite.anchorY = 1;\r\n\r\n            const egg = sprite.getComponent(Egg);\r\n            egg.removeRigidBody();\r\n            egg.eggID = this._incubationEntry.egg_id;\r\n            egg.init();\r\n\r\n            this._curEgg = egg;\r\n            this._iconScale = sprite.scaleY;\r\n            this._iconOriginY = sprite.y;\r\n\r\n            switch (this._curState) {\r\n\r\n                case IncubationSlotState.INCUBATION:\r\n                    this.startIconBounceAnimationIncubation();\r\n                    break;\r\n                case IncubationSlotState.READY:\r\n                    this.startIconBounceAnimationReady();\r\n                    break;\r\n            }\r\n        }); \r\n    }\r\n\r\n    // 停止跳动动画\r\n    private stopIconBounceAnimation() {\r\n        Laya.Tween.clearTween(this.icon); // 清除 this.icon 上的所有动画\r\n    }\r\n\r\n    // 给icon增加一个跳动的动画效果\r\n    private startIconBounceAnimationIncubation() {\r\n        // 首先停止之前可能存在的动画\r\n        this.stopIconBounceAnimation(); \r\n\r\n        if (this._curEgg == null) return;\r\n\r\n        // 动画函数：让icon缩放变大并稍微上移，带有弹力效果\r\n        const bounce1 = () => {\r\n            Laya.Tween.to(this._curEgg.owner, { scaleX: this._iconScale * 1.1, scaleY: this._iconScale * 0.8 }, 1000, Laya.Ease.linearInOut, Laya.Handler.create(this, bounce2));\r\n        };\r\n\r\n        // 动画函数：让icon缩放变小并回到原位置，带有弹力效果\r\n        const bounce2 = () => {\r\n            Laya.Tween.to(this._curEgg.owner, { scaleX: this._iconScale, scaleY: this._iconScale }, 1000, Laya.Ease.linearInOut, Laya.Handler.create(this, bounce1));\r\n        };\r\n\r\n        // 开始第一次动画\r\n        bounce1();\r\n    }\r\n\r\n    private startIconBounceAnimationReady() {\r\n        // 首先停止之前可能存在的动画\r\n        this.stopIconBounceAnimation(); \r\n\r\n        if (this._curEgg == null) return;\r\n\r\n        // 动画函数：让icon缩放变大并稍微上移，带有弹力效果\r\n        const bounce1 = () => {\r\n            Laya.Tween.to(this._curEgg.owner, { scaleX: this._iconScale * 1.1,  scaleY: this._iconScale * 0.8 }, 1000, Laya.Ease.backOut, Laya.Handler.create(this, bounce2));\r\n        };\r\n\r\n        // 动画函数：让icon缩放变小并回到原位置，带有弹力效果\r\n        const bounce2 = () => {\r\n            Laya.Tween.to(this._curEgg.owner, { scaleX: this._iconScale * 1, scaleY: this._iconScale * 1, y: this._iconOriginY - 100}, 200, Laya.Ease.circInOut, Laya.Handler.create(this, bounce3));\r\n        };\r\n\r\n        // 动画函数：让icon缩放变小并回到原位置，带有弹力效果\r\n        const bounce3 = () => {\r\n            Laya.Tween.to(this._curEgg.owner, { scaleX: this._iconScale * 1, scaleY: this._iconScale * 1, y: this._iconOriginY }, 1000, Laya.Ease.bounceOut, Laya.Handler.create(this, bounce1));\r\n        };\r\n\r\n        // 开始第一次动画\r\n        bounce1();\r\n    }\r\n\r\n    initTimeShower() {\r\n\r\n        if(this._countdownTimer != null) {\r\n            this._countdownTimer.restart(this._incubationEntry.maturation_at.T)\r\n            return;\r\n        }\r\n\r\n        this._countdownTimer = new CountdownTimer(this._incubationEntry.maturation_at.T, \r\n            (remainingTime, difference) => {\r\n                this.textCooldownTime.text = `${remainingTime}`\r\n\r\n            },\r\n            (remainingTime, difference) => {\r\n                this.textCooldownTime.text = `${remainingTime}`\r\n            },\r\n            () => {\r\n                this.setState(IncubationSlotState.READY);\r\n            }\r\n        );\r\n        this._countdownTimer.start();\r\n    }\r\n\r\n    updateSlot(incubationEntry: IncubationEntry) {\r\n        this._incubationEntry = incubationEntry;\r\n        if(incubationEntry.is_in_progress) {\r\n            const currentTime = Math.floor(Date.now() / 1000);\r\n            if (currentTime > incubationEntry.maturation_at.T) {\r\n                this.setState(IncubationSlotState.READY);\r\n            } else {\r\n                this.setState(IncubationSlotState.INCUBATION);\r\n            }\r\n        } else {\r\n            this.setState(IncubationSlotState.EMPTY);\r\n        }\r\n    }\r\n\r\n    //手动调用节点销毁时执行\r\n    onDestroy(): void {\r\n        this.stopIconBounceAnimation();\r\n    }\r\n\r\n    //每帧更新时执行，尽量不要在这里写大循环逻辑或者使用getComponent方法\r\n    //onUpdate(): void {}\r\n\r\n    //每帧更新时执行，在update之后执行，尽量不要在这里写大循环逻辑或者使用getComponent方法\r\n    //onLateUpdate(): void {}\r\n\r\n    //鼠标点击后执行。与交互相关的还有onMouseDown等十多个函数，具体请参阅文档。\r\n    //onMouseClick(): void {}\r\n}","import { RunTimeDataManager } from \"../RunTimeData/RunTimeDataManager\";\r\nimport BoxCollider = Laya.BoxCollider;\r\nimport Sprite = Laya.Sprite;\r\nimport Event = Laya.Event;\r\nimport RigidBody = Laya.RigidBody;\r\nimport ChainCollider = Laya.ChainCollider;\r\nimport MouseJoint = Laya.MouseJoint;\r\nimport PolygonCollider = Laya.PolygonCollider;\r\nimport CircleCollider = Laya.CircleCollider;\r\nimport RevoluteJoint = Laya.RevoluteJoint;\r\n\r\nimport { EggConfig } from \"../Config/ExcelEgg\";\r\nimport { Egg } from \"./Egg\";\r\n\r\nconst { regClass, property } = Laya;\r\n\r\n@regClass('DVR1zPUiRceIY6FayhcJTg')\r\nexport class MachinePhysics extends Laya.Script {\r\n\r\n    declare owner : Laya.Sprite;\r\n\r\n    public box2D: Laya.Box;\r\n\r\n    public pageWidth: number;\r\n    public pageHeight: number;\r\n\r\n    public static k_smallGroup = 1;\r\n    public static k_middleGroup = 0;\r\n    public static k_largeGroup = -1;\r\n    public static k_triangleCategory = 0x2;\r\n    public static k_boxCategory = 0x4;\r\n    public static k_circleCategory = 0x8;\r\n    public static k_triangleMask = 0xF;\r\n    public static k_boxMask = 0xF ^ MachinePhysics.k_circleCategory;\r\n    public static k_circleMask = 0xF; // 0x01为house刚体默认的category，若不设置，则会穿透house\r\n\r\n    private _eggMap: Record<string, Egg>;\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        this.pageWidth = Laya.stage.designHeight * Laya.Browser.clientWidth / Laya.Browser.clientHeight;\r\n        this.pageHeight = Laya.stage.designHeight;\r\n\r\n        this._eggMap = {}\r\n    }\r\n\r\n    onStart(): void {\r\n\r\n        //super.base();\r\n        this.box2D = this.owner as Laya.Panel;\r\n        //this.box2D.bgColor = \"#232628\";\r\n        Laya.Config.isAntialias = true;\r\n        Laya.Physics2D.I.start();\r\n        this.createHouse();\r\n        \r\n        this.createEggs();\r\n    } \r\n\r\n    \r\n    createHouse() {\r\n        let house = new Sprite();\r\n        //@ts-ignore\r\n        //console.log(house.globalRotation)\r\n        this.box2D.addChild(house);\r\n        let rigidbody: RigidBody = house.addComponent(RigidBody);\r\n        rigidbody.type = \"static\";\r\n        let chainCollider: ChainCollider = house.addComponent(ChainCollider);\r\n        chainCollider.loop = true;\r\n\r\n        let offsetWidth = 30;\r\n        let offsetHeight = -10;\r\n\r\n        chainCollider.datas = [\r\n            0 + offsetWidth, 0, \r\n            0 + offsetWidth, this.owner.height - offsetHeight, \r\n            this.owner.width - offsetWidth, this.owner.height - offsetHeight, \r\n            this.owner.width - offsetWidth, 0];\r\n    }\r\n\r\n    addGroup(rigidbody: Laya.RigidBody, ratio: number) {\r\n        switch (ratio) {\r\n            case 1:\r\n                rigidbody.group = MachinePhysics.k_smallGroup;\r\n                break;\r\n            case 2:\r\n                rigidbody.group = MachinePhysics.k_middleGroup;\r\n                break;\r\n            case 3:\r\n                rigidbody.group = MachinePhysics.k_largeGroup;\r\n                break;\r\n        }\r\n    }\r\n\r\n    createEggs() {\r\n        \r\n        //测试数据\r\n        // Laya.loader.load(\"resources/prefabs/egg/P_10002001.lh\").then(res => {\r\n        //     for (let i = 1; i <= 10; i++){\r\n        //         let randomNumber = 0.8;// + (Math.random() * 0.5)\r\n        //         let sprite : Laya.Sprite = res.create();\r\n        //         sprite.scale(randomNumber, randomNumber , true);\r\n        //         sprite.pos(100, 100)\r\n        //         this.box2D.addChild(sprite); \r\n        //         let rigidbody: RigidBody = sprite.getComponent(RigidBody);\r\n        //         rigidbody.category = MachinePhysics.k_triangleCategory;\r\n        //         rigidbody.mask = MachinePhysics.k_triangleMask;\r\n        //         rigidbody.group = 1;\r\n        //     }\r\n        // });\r\n\r\n        //根据网络数据加载蛋\r\n        const machineData = RunTimeDataManager.instance.runTimeData.machine_data;\r\n        let offsetWidth = 50;\r\n        let offsetHeight = 300;\r\n\r\n        Object.keys(machineData.egg_list).forEach(eggID => {\r\n            const eggData = machineData.egg_list[eggID];\r\n            const eggConfig = EggConfig.getConfig(eggData.config_id);\r\n\r\n            Laya.loader.load(eggConfig.Prefab).then(res => {\r\n                let randomNumber = eggConfig.Scale;\r\n                let sprite : Laya.Sprite = res.create();\r\n                sprite.scale(randomNumber, randomNumber, true);\r\n                sprite.pos(offsetWidth + ((this.owner.width - offsetWidth) * Math.random()), offsetHeight * Math.random())\r\n                this.box2D.addChild(sprite);\r\n                const rigidBody = sprite.getComponent(RigidBody);\r\n                rigidBody.category = MachinePhysics.k_triangleCategory;\r\n                rigidBody.mask = MachinePhysics.k_triangleMask;\r\n                rigidBody.group = 1;\r\n\r\n                const egg = sprite.getComponent(Egg);\r\n                egg.eggID = eggID;\r\n                egg.machinePhysics = this;\r\n                egg.init();\r\n                \r\n                this._eggMap[eggID] = egg;\r\n            }); \r\n\r\n            //console.log(`Egg ID: ${eggId}, Config ID: ${eggData.config_id}`);\r\n        });\r\n    }\r\n\r\n    public removeEgg(eggID: string) {\r\n        if(this._eggMap[eggID]) {\r\n            this._eggMap[eggID].owner.destroy();\r\n            delete this._eggMap[eggID];\r\n        }\r\n    }\r\n\r\n    public getEgg(eggID: string) : Egg {\r\n        return this._eggMap[eggID];\r\n    }\r\n\r\n    public removeAllEggs() {\r\n        Object.keys(this._eggMap).forEach(eggID => {\r\n            this.removeEgg(eggID);\r\n        })\r\n    }\r\n\r\n    public clearAllEggs() {\r\n        Object.keys(this._eggMap).forEach(eggID => {\r\n            this.getEgg(eggID).clear();\r\n            delete this._eggMap[eggID];\r\n        })\r\n    }\r\n\r\n    onDisable(): void {\r\n        Laya.Physics2D.I.destroyWorld();\r\n    }\r\n}","export class TransitionTool {\r\n    public static transitionValue(label: Laya.Label, newValue: number, duration: number = 1000): void {\r\n        const currentValue = parseFloat(label.text) || 0; // 获取当前值\r\n        const startTime = Laya.Browser.now(); // 获取开始时间\r\n\r\n        const onUpdate = () => {\r\n            const elapsed = Laya.Browser.now() - startTime; // 计算已过时间\r\n            const t = Math.min(elapsed / duration, 1); // 计算进度（0-1）\r\n\r\n            // 更新当前值，使用线性插值\r\n            const value = currentValue + (newValue - currentValue) * t;\r\n\r\n            // 更新 Label 文本\r\n            label.text = Math.round(value).toString();\r\n\r\n            // 当过渡完成时停止循环\r\n            if (t >= 1) {\r\n                Laya.timer.clear(this, onUpdate); // 清除定时器\r\n            }\r\n        };\r\n\r\n        Laya.timer.frameLoop(1, this, onUpdate); // 启动循环\r\n    }\r\n}\r\n","import { SoundFXManager } from \"../Component/SoundManager\";\r\nimport Sprite = Laya.Sprite;\r\nimport Tween = Laya.Tween;\r\nimport Handler = Laya.Handler;\r\nimport Ease = Laya.Ease;\r\nimport Point = Laya.Point;\r\n\r\nexport class CoinFlyEffect {\r\n    private coins: Sprite[] = [];\r\n    private target: Sprite; // The target icon (e.g., a coin bag or player avatar)\r\n    private coinCount: number;\r\n    private targetPos: { x: number, y: number };\r\n    private range: number;\r\n    private width = 50;  // Set coin size\r\n    private height = 50; // Set coin size\r\n    private texture: Laya.Texture;\r\n    private sfx: string;\r\n\r\n    constructor(coinCount: number, target: Sprite, range: number, sftx: string) {\r\n        this.coinCount = coinCount;\r\n        this.target = target;\r\n        this.range = range;\r\n        this.width = target.width;\r\n        this.height = target.height;\r\n        this.texture = target.texture;\r\n        this.sfx = sftx;\r\n\r\n        let targetWorldPos: Point = Point.create();\r\n        targetWorldPos.x = target.width * target.anchorX;\r\n        targetWorldPos.y = target.height * target.anchorY;\r\n        targetWorldPos = target.localToGlobal(targetWorldPos);\r\n\r\n        this.targetPos = { x: targetWorldPos.x, y: targetWorldPos.y }; // The target's position\r\n    }\r\n\r\n    // Initialize the coins and start the flying effect\r\n    public startEffect(x: number, y: number) {\r\n        // Generate the coins\r\n        for (let i = 0; i < this.coinCount; i++) {\r\n            const coin = this.createCoin();\r\n            this.coins.push(coin);\r\n            Laya.stage.addChild(coin);\r\n\r\n            // Randomize starting position of coins\r\n            const angle = Math.random() * 2 * Math.PI; // 随机生成一个 0 到 2*PI 的角度\r\n            const radius = Math.random() * this.range; // 随机生成一个半径，范围是 0 到 this.range\r\n\r\n            const startX = x + Math.cos(angle) * radius; // 根据角度和半径计算 X 坐标\r\n            const startY = y + Math.sin(angle) * radius; // 根据角度和半径计算 Y 坐标\r\n\r\n            coin.pos(startX, startY);\r\n\r\n            // Animate each coin toward the target\r\n            this.animateCoin(coin, this.targetPos.x, this.targetPos.y);\r\n        }\r\n    }\r\n\r\n    // Create a coin sprite\r\n    private createCoin(): Sprite {\r\n        const coin = new Sprite();\r\n        coin.texture = this.texture;\r\n        //coin.loadImage(this.image); // Load your coin image\r\n        coin.width = this.width;  // Set coin size\r\n        coin.height = this.height; // Set coin size\r\n        return coin;\r\n    }\r\n\r\n    // Animate a coin from start to target position\r\n    private animateCoin(coin: Sprite, targetX: number, targetY: number) {\r\n        const duration = 1000 + Math.random() * 500; // Randomize animation time\r\n        Tween.to(coin, { scaleX: 1.2, scaleY: 1.2 }, duration * 0.3, Ease.cubicInOut, Handler.create(this, () => {\r\n            Tween.to(coin, { x: targetX, y: targetY, scaleX: 1, scaleY: 1 }, duration, Ease.cubicIn, Handler.create(this, () => {\r\n                SoundFXManager.playSoundFX(this.sfx);\r\n                coin.removeSelf(); // Remove the coin once the animation is done\r\n            }));\r\n        }));\r\n    }\r\n}\r\n","const { regClass, property } = Laya;\r\n\r\nimport { Claw } from \"./Claw\";\r\nimport Sprite = Laya.Sprite;\r\nimport Event = Laya.Event;\r\nimport Tween = Laya.Tween;\r\nimport Ease = Laya.Ease;\r\nimport Handler = Laya.Handler;\r\nimport Point = Laya.Point;\r\nimport Label = Laya.Label;\r\nimport Keyboard = Laya.Keyboard;\r\nimport { MachinePhysics } from \"./MachinePhysics\";\r\nimport { RunTimeDataManager } from \"../RunTimeData/RunTimeDataManager\";\r\nimport { TransitionTool } from \"../Utils/TransitionTool \";\r\nimport { CountdownTimer } from \"../Component/CountdownTimer\";\r\nimport { HttpManager } from \"../Http/HttpManager\";\r\nimport { HttpURL } from \"../Http/HttpDefine\";\r\nimport { UIManager } from \"../UI/UIManager\";\r\nimport { EggConfig } from \"../Config/ExcelEgg\";\r\nimport { IncubationSlot } from \"./IncubationSlot\";\r\nimport { CoinFlyEffect } from \"../FX/CoinFlyEffect\";\r\nimport { UIClassName } from \"../UI/UIDefine\";\r\nimport { ItemConfig } from \"../Config/ExcelItem\";\r\nimport { Arrow } from \"./Arrow\";\r\nimport { SoundFXManager } from \"../Component/SoundManager\";\r\n\r\n@regClass('m2kViDcTTYmr8Ky4zATsSw')\r\nexport class Machine extends Laya.Script {\r\n    //declare owner : Laya.Sprite3D;\r\n    declare owner : Laya.Sprite;\r\n\r\n    @property(Claw)\r\n    public claw: Claw;\r\n\r\n    @property(Sprite)\r\n    public bGrab: Sprite;\r\n\r\n    @property(Sprite)\r\n    public bCollection: Sprite;\r\n\r\n    @property(Sprite)\r\n    public background: Sprite;\r\n\r\n    @property(Sprite)\r\n    public grassGround: Sprite;\r\n\r\n    @property({ type : Number })\r\n    public backgroundOffsetScale : number = 0.1;\r\n\r\n    @property(Label)\r\n    public textPoint: Label;\r\n\r\n    @property(Label)\r\n    public textGem: Label;\r\n\r\n    @property(Sprite)\r\n    public pointIcon: Sprite;\r\n    private _pointFlyEffect: CoinFlyEffect;\r\n\r\n    @property(Sprite)\r\n    public gemIcon: Sprite;\r\n    private _gemFlyEffect: CoinFlyEffect;\r\n\r\n    @property(Label)\r\n    public textResetCooldownTime: Label;\r\n    private _resetCoolDownTimer : CountdownTimer;\r\n\r\n    @property(Label)\r\n    public textGameCoinCooldownTime: Label;\r\n    private _gameCoinCoolDownTimer : CountdownTimer;\r\n\r\n    @property(MachinePhysics)\r\n    public machinePhysics : MachinePhysics;\r\n\r\n    @property([IncubationSlot])\r\n    public incubationSlotList: IncubationSlot[];\r\n\r\n    @property(Arrow)\r\n    public arrow: Arrow;\r\n\r\n    private _arrowDelayTimeCofig = 15;\r\n    private _arrowDelayTime = this._arrowDelayTimeCofig;\r\n    \r\n    private _backgroundTime : number = 0;\r\n    private _machineID: string;\r\n    \r\n    onDisable(): void {\r\n        \r\n    }\r\n\r\n    //组件被激活后执行，此时所有节点和组件均已创建完毕，此方法只执行一次\r\n    onAwake(): void {\r\n        this._backgroundTime = 0;\r\n        this.claw.onFoundEggCallback = this.foundEgg;\r\n\r\n        this._pointFlyEffect = new CoinFlyEffect(20, this.pointIcon, 160, \"SFX_Gold03\")\r\n        this._gemFlyEffect = new CoinFlyEffect(20, this.gemIcon, 180, \"SFX_Gem01\")\r\n    }\r\n\r\n    //组件被启用后执行，例如节点被添加到舞台后\r\n    //onEnable(): void {}\r\n\r\n    //第一次执行update之前执行，只会执行一次\r\n    onStart(): void {\r\n        \r\n        this.bGrab.on(Event.CLICK, this, this.onClickGrab);\r\n        this.bCollection.on(Event.CLICK, this, this.onClickCollection);\r\n\r\n        this._machineID = RunTimeDataManager.instance.runTimeData.machine_data.id;\r\n        \r\n        this.initTimeShower();\r\n\r\n        this.eventListener();\r\n\r\n        this.updateDisplay();\r\n\r\n        this.initOrRefreshGameCoinTimeShower();\r\n\r\n        //设定槽位的信息\r\n        for(let i = 0; i < this.incubationSlotList.length; i++) {\r\n            this.incubationSlotList[i].onHarvestEggCallback = this.harvestEgg;\r\n        }\r\n\r\n        //保存实例引用\r\n        RunTimeDataManager.instance.machine = this;\r\n    }\r\n\r\n    initTimeShower() {\r\n        const machineData = RunTimeDataManager.instance.runTimeData.machine_data;\r\n\r\n        if(this._resetCoolDownTimer != null) {\r\n            this._resetCoolDownTimer.restart(machineData.next_refresh_at.T)\r\n            return;\r\n        }\r\n\r\n        this._resetCoolDownTimer = new CountdownTimer(machineData.next_refresh_at.T, \r\n            (remainingTime, difference) => {\r\n                this.textResetCooldownTime.text = `${remainingTime}`\r\n            },\r\n            (remainingTime, difference) => {\r\n\r\n                this.textResetCooldownTime.text = `${remainingTime}`\r\n            },\r\n            () => {\r\n                //console.log(\"Countdown completed!\");\r\n\r\n                //清空所有蛋,重新初始化新的蛋\r\n                this.machinePhysics.clearAllEggs();\r\n\r\n                const machineID = machineData.id;\r\n                RunTimeDataManager.instance.runTimeData.resetMachineData();\r\n                \r\n                Laya.timer.once(2000, this, this.resetEggs);\r\n            }\r\n        );\r\n        this._resetCoolDownTimer.start();\r\n    }\r\n\r\n\r\n    initOrRefreshGameCoinTimeShower() {\r\n        const machineCoinData = RunTimeDataManager.instance.runTimeData.machine_coin_data;\r\n\r\n        machineCoinData.updateGameCoin();\r\n\r\n        if(this._gameCoinCoolDownTimer != null) {\r\n            this._gameCoinCoolDownTimer.restart(machineCoinData.game_coin_next_update_at.T)\r\n            return;\r\n        }\r\n\r\n        this._gameCoinCoolDownTimer = new CountdownTimer(machineCoinData.game_coin_next_update_at.T, \r\n            (remainingTime, difference) => {\r\n                this.textGameCoinCooldownTime.text = `${remainingTime}`\r\n            },\r\n            (remainingTime, difference) => {\r\n\r\n                this.textGameCoinCooldownTime.text = `${remainingTime}`\r\n            },\r\n            () => {\r\n                //console.log(\"Countdown completed!\");\r\n                this.initOrRefreshGameCoinTimeShower();\r\n                this.updateDisplay();\r\n            }\r\n        );\r\n        this._gameCoinCoolDownTimer.start();\r\n    }\r\n\r\n    resetEggs() {\r\n\r\n        //默认写死的,后面更新\r\n        const params = { \r\n            machine_id: this._machineID,\r\n        }; \r\n\r\n        //获取娃娃机的信息\r\n        HttpManager.instance.post(HttpURL.update_machine_data, params, (response: any) => {  \r\n            this.machinePhysics.createEggs();\r\n            this.initTimeShower();\r\n        }, (error: any) => {  \r\n            UIManager.instance.ShowMessageBox(error.err_msg, null);\r\n        });        \r\n    }\r\n\r\n    updateDisplay() {\r\n        //刷新顶部的条\r\n        const wallet = RunTimeDataManager.instance.runTimeData.wallet;\r\n        TransitionTool.transitionValue(this.textPoint, wallet.point, 2000);\r\n        TransitionTool.transitionValue(this.textGem, wallet.gem, 2000);\r\n\r\n        this.claw.updateGameCoinDisplay();\r\n\r\n        //刷新孵化器的条目\r\n        const machineData = RunTimeDataManager.instance.runTimeData.machine_data;\r\n        for(let i = 0; i < machineData.incubation_list.length; i++) {\r\n            this.incubationSlotList[i].index = i;\r\n            this.incubationSlotList[i].updateSlot(machineData.incubation_list[i]);\r\n        }\r\n    }\r\n\r\n    onClickGrab(e: Event = null): void {\r\n        SoundFXManager.playSoundFX(\"SFX_ButtonClick01\");\r\n        this.claw.grab();\r\n        this.arrow.owner.visible = false;\r\n        this._arrowDelayTime = this._arrowDelayTimeCofig;\r\n    }\r\n\r\n    onClickCollection(e: Event = null): void {\r\n        SoundFXManager.playSoundFX(\"SFX_ButtonClick01\");\r\n        UIManager.instance.pushUI(UIClassName.UI_Collection_HUD, null);\r\n    }\r\n\r\n    //每帧更新时执行，尽量不要在这里写大循环逻辑或者使用getComponent方法\r\n    //onUpdate(): void {}\r\n\r\n    //每帧更新时执行，在update之后执行，尽量不要在这里写大循环逻辑或者使用getComponent方法\r\n    onLateUpdate(): void {\r\n        let deltaTime = Laya.timer.delta / 1000;\r\n        this._backgroundTime += deltaTime * this.backgroundOffsetScale;\r\n        this.background.material.setFloat(\"u_Time\", this._backgroundTime)\r\n        this.grassGround.material.setFloat(\"u_Time\", -this._backgroundTime)\r\n        if(this._backgroundTime > Number.MAX_SAFE_INTEGER) {\r\n            this._backgroundTime = 0;\r\n        }\r\n\r\n        if(this.arrow.owner.visible == false) {\r\n            this._arrowDelayTime -= deltaTime;\r\n            if(this._arrowDelayTime <= 0) {\r\n                this.arrow.owner.visible = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    public foundEgg = (eggID: string) => {\r\n\r\n        //先判断池子有没有东西,如果有东西就不发送网络请求了\r\n        const machineData = RunTimeDataManager.instance.runTimeData.machine_data;\r\n        if (machineData.egg_list && machineData.egg_list[eggID]) {\r\n            //return;\r\n        } else {\r\n            return;\r\n        }\r\n\r\n        const eggData = machineData.egg_list[eggID];\r\n        const eggConfig = EggConfig.getConfig(eggData.config_id);\r\n        const egg = this.machinePhysics.getEgg(eggID);\r\n\r\n        let eggWorldPos: Point = Point.create();\r\n        eggWorldPos.x = egg.owner.width * egg.owner.anchorX;\r\n        eggWorldPos.y = egg.owner.height * egg.owner.anchorY;\r\n        eggWorldPos = egg.owner.localToGlobal(eggWorldPos);\r\n\r\n        const totalGameCoin = RunTimeDataManager.instance.runTimeData.machine_coin_data.getTotalGameCoin();\r\n\r\n        if(totalGameCoin <= 0) {\r\n            egg.removeJoint();\r\n            UIManager.instance.ShowMessageBox(\"No enough game coin\", null);\r\n            SoundFXManager.playSoundFX(\"SFX_Failed\");\r\n            return;\r\n        }\r\n\r\n        if (machineData.hasEmptyIncubationSlot() == false && eggConfig.IncubationTime > 0) {\r\n            egg.removeJoint();\r\n            UIManager.instance.ShowMessageBox(\"No empty incubation slot\", null);\r\n            SoundFXManager.playSoundFX(\"SFX_Failed\");\r\n            return;\r\n        }\r\n\r\n        //发送网络消息\r\n        const params = {\r\n            \"machine_id\": machineData.id,\r\n            \"egg_id\":eggID\r\n        }\r\n\r\n        HttpManager.instance.post(HttpURL.found_egg, params, (response: any) => {  \r\n\r\n            this.updateDisplay();\r\n            this.initOrRefreshGameCoinTimeShower();\r\n            this.handleFoundEgg(response, eggWorldPos.x, eggWorldPos.y);\r\n            //这里要打开一个计时器页面\r\n            //console.log(RunTimeDataManager.instance.runTimeData.wallet.point);\r\n            \r\n        }, (error: any) => {  \r\n            UIManager.instance.ShowMessageBox(error.err_msg, null);\r\n        }); \r\n        \r\n        this.machinePhysics.removeEgg(eggID);\r\n    }\r\n\r\n    public handleFoundEgg(response: any, eggX: number, eggY: number)\r\n    {\r\n        const eggConfig = EggConfig.getConfig(response.response.egg_config_id)\r\n        switch(eggConfig.ClientHandle) {\r\n            case \"point\": \r\n                {\r\n                    SoundFXManager.playSoundFX(\"SFX_ItemDrop\");\r\n                    UIManager.instance.pushUI(UIClassName.UI_ClaimItem_HUD, {\r\n                        itemID: response.response.loot_item_id,\r\n                        count: response.response.loot_item_count\r\n                    });\r\n                    this._pointFlyEffect.startEffect(eggX, eggY);\r\n                }\r\n                break;\r\n            case \"gem\": \r\n                {\r\n                    SoundFXManager.playSoundFX(\"SFX_ItemDrop\");\r\n                    UIManager.instance.pushUI(UIClassName.UI_ClaimItem_HUD, {\r\n                        itemID: response.response.loot_item_id,\r\n                        count: response.response.loot_item_count\r\n                    });\r\n                    this._gemFlyEffect.startEffect(eggX, eggY);\r\n                }\r\n                break;\r\n                \r\n            case \"egg\":\r\n                {\r\n                    UIManager.instance.pushUI(UIClassName.UI_ShowEggIncuabtion_HUD, {\r\n                        incubationIndex: response.response.incubation_index\r\n                    });\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n    public harvestEgg = (soltIndex: number, worldPos: Point) => {\r\n\r\n        const machineData = RunTimeDataManager.instance.runTimeData.machine_data\r\n        //发送网络消息\r\n        const params = {\r\n            \"machine_id\": machineData.id,\r\n            \"incubation_index\":soltIndex\r\n        }\r\n\r\n        HttpManager.instance.post(HttpURL.harvest_egg, params, (response: any) => {  \r\n\r\n            this.updateDisplay();\r\n            //这里要打开一个收获页面\r\n            this.handleHarvestEgg(response, worldPos.x, worldPos.y);\r\n\r\n        }, (error: any) => {  \r\n            UIManager.instance.ShowMessageBox(error, null);\r\n        }); \r\n    }\r\n\r\n    public handleHarvestEgg(response: any, eggX: number, eggY: number)\r\n    {\r\n        UIManager.instance.pushUI(UIClassName.UI_ClaimItem_HUD, {\r\n            itemID: response.response.loot_item_id,\r\n            count: response.response.loot_item_count\r\n        });\r\n\r\n        const config = ItemConfig.getConfig(response.response.loot_item_id)\r\n        switch(config.ClientHandle) {\r\n            case \"point\": \r\n                {\r\n                    this._pointFlyEffect.startEffect(eggX, eggY);\r\n                }\r\n                break;\r\n                \r\n            case \"gem\": \r\n                {\r\n                    this._gemFlyEffect.startEffect(eggX, eggY);\r\n                }\r\n                break;\r\n                \r\n            case \"collection\":\r\n                {\r\n                    \r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n    eventListener() {\r\n       \r\n        Laya.stage.on(Event.KEY_DOWN, this, (e: any = null) => {\r\n            switch (e.keyCode) {\r\n\r\n                case Keyboard.DOWN:\r\n                    //this.claw.stop();\r\n                    this.claw.grab();\r\n                    break;\r\n            }\r\n        });\r\n    }\r\n\r\n}","import { GameStateManager } from \"./GameStateManager\";\r\n\r\nexport abstract class GameStateBase {\r\n    protected gameStateManager: GameStateManager;\r\n\r\n    constructor(gameStateManager: GameStateManager) {\r\n        this.gameStateManager = gameStateManager;\r\n    }\r\n\r\n    // 进入状态时调用\r\n    abstract enter(): void;\r\n\r\n    // 离开状态时调用\r\n    abstract exit(): void;\r\n\r\n    // 更新状态，每帧调用\r\n    abstract update(): void;\r\n}","const { regClass, property } = Laya;\r\n\r\n@regClass('_XACmj2HQ7OSH2UUagT4-Q')\r\nexport class Splash {\r\n    \r\n    public static instance: Laya.Sprite;\r\n    \r\n    public static openSplash(): void {\r\n        Laya.loader.load(\"resources/prefabs/ui/P_Splash.lh\").then(res => {\r\n            \r\n            let sprite : Laya.Sprite = res.create();\r\n            sprite.anchorX = 0.5;\r\n            sprite.anchorY = 0.5;\r\n            Laya.stage.addChild(sprite);\r\n\r\n            const pageWidth = Laya.stage.designHeight * Laya.Browser.clientWidth / Laya.Browser.clientHeight;\r\n            const pageHeight = Laya.stage.designHeight;\r\n\r\n            let aWidth = pageWidth;\r\n            let aHeight = pageHeight;\r\n\r\n            let bWidth = sprite.width;\r\n            let bHeight = sprite.height;\r\n\r\n            // 计算宽高比例\r\n            let scaleX = aWidth / bWidth;\r\n            let scaleY = aHeight / bHeight;\r\n\r\n            // 取最小的比例来保证等比缩放\r\n            let scale = Math.min(scaleX, scaleY);\r\n\r\n            // 应用等比缩放\r\n            //sprite.scale(scale, scale, true);\r\n            \r\n            // 将 sprite 放置在 icon 的中心位置\r\n            sprite.pos(aWidth / 2, aHeight / 2);\r\n            //sprite.anchorY = 1;\r\n\r\n            Splash.instance = sprite;\r\n        }); \r\n    }\r\n\r\n    public static closeSplash(): void {\r\n        if(Splash.instance) {\r\n            Splash.instance.destroy();\r\n            Splash.instance = null;\r\n        }\r\n    }\r\n    //组件被激活后执行，此时所有节点和组件均已创建完毕，此方法只执行一次\r\n    //onAwake(): void {}\r\n\r\n    //组件被启用后执行，例如节点被添加到舞台后\r\n    //onEnable(): void {}\r\n\r\n    //组件被禁用时执行，例如从节点从舞台移除后\r\n    //onDisable(): void {}\r\n\r\n    //第一次执行update之前执行，只会执行一次\r\n    //onStart(): void {}\r\n\r\n    //手动调用节点销毁时执行\r\n    //onDestroy(): void {}\r\n\r\n    //每帧更新时执行，尽量不要在这里写大循环逻辑或者使用getComponent方法\r\n    //onUpdate(): void {}\r\n\r\n    //每帧更新时执行，在update之后执行，尽量不要在这里写大循环逻辑或者使用getComponent方法\r\n    //onLateUpdate(): void {}\r\n\r\n    //鼠标点击后执行。与交互相关的还有onMouseDown等十多个函数，具体请参阅文档。\r\n    //onMouseClick(): void {}\r\n}","import { UIManager } from \"../UI/UIManager\";\r\nimport { GameStateBase } from \"./GameStateBase\";\r\nimport { GameState, GameStateManager } from \"./GameStateManager\";\r\nimport { HttpManager, postWithPromise, getWithPromise } from \"../Http/HttpManager\";\r\nimport { ConfigManager } from \"../Config/ConfigManager\";\r\nimport { RunTimeDataManager } from \"../RunTimeData/RunTimeDataManager\";\r\nimport { HttpURL } from \"../Http/HttpDefine\";\r\nimport { Splash } from \"../Component/Splash\";\r\nimport { WebMessage } from \"../Component/WebMessage\";\r\n\r\n// 定义生成器函数  \r\nasync function* processSteps() {  \r\n\r\n    while(!ConfigManager.instance) {\r\n       await new Promise(resolve => setTimeout(resolve, 100));\r\n        //yield \"Checking ConfigManager initialization...\"; \r\n    }\r\n\r\n    ConfigManager.instance.loadAll();\r\n    while (!ConfigManager.instance.initialized) {\r\n       await new Promise(resolve => setTimeout(resolve, 100));\r\n        //yield \"Checking loaded...\"; \r\n    }\r\n\r\n    while (!UIManager.instance) {  \r\n       await new Promise(resolve => setTimeout(resolve, 100));  \r\n        //yield \"Checking UIManager initialization...\";  \r\n    }  \r\n\r\n    UIManager.instance.init();\r\n    while (!UIManager.instance.initialized) {  \r\n       await new Promise(resolve => setTimeout(resolve, 100));  \r\n        //yield \"Checking initialization...\";  \r\n    }  \r\n\r\n    while (!HttpManager.instance) {  \r\n       await new Promise(resolve => setTimeout(resolve, 100));  \r\n        //yield \"Checking HttpManager initialization...\";  \r\n    } \r\n  \r\n    while(!RunTimeDataManager.instance) {\r\n        await new Promise(resolve => setTimeout(resolve, 100));\r\n        //yield \"Checking RunTimeDataManager initialization...\"; \r\n    }\r\n\r\n    const tgData = RunTimeDataManager.instance.tgData;\r\n\r\n    const isEditorEnvironment = Laya.Browser.window.location.href.includes(\"localhost\") || \r\n                            Laya.Browser.window.location.href.startsWith(\"file://\");\r\n    if (isEditorEnvironment) {\r\n\r\n        console.log(\"当前在编辑器环境中\");\r\n        tgData.initDataRaw = \"query_id=AAFV-CoDAQAAAFX4KgODJr1_&user=%7B%22id%22%3A100000003%2C%22first_name%22%3A%22NNNNiko%22%2C%22last_name%22%3A%22Test%22%2C%22username%22%3A%22niko_test1%22%2C%22language_code%22%3A%22zh-hans%22%2C%22allows_write_to_pm%22%3Atrue%7D&auth_date=1722587152&hash=8e791a997e55723714f73878fdeb27d7e17157f5fb2b460d6fc461f5ce82809c\";\r\n        tgData.isInit = true;\r\n        \r\n    } else {\r\n        //发送消息给前端,需要TG的信息\r\n        const message = { type: 'GAME_EVENT', data: {\r\n            handle:\"GAME_READY\"\r\n        } }; \r\n        WebMessage.sendMessageToWeb(message)\r\n    }\r\n\r\n    \r\n    while(!tgData.isInit) {\r\n        await new Promise(resolve => setTimeout(resolve, 100));\r\n        //yield \"Checking tgData initialization...\"; \r\n    }\r\n\r\n    //等待tg给与用户登录字符串\r\n    try {  \r\n        //登录\r\n        const loginData = { \r\n            //init_data_raw: \"query_id=AAFV-CoDAQAAAFX4KgODJr1_&user=%7B%22id%22%3A100000003%2C%22first_name%22%3A%22NNNNiko%22%2C%22last_name%22%3A%22Test%22%2C%22username%22%3A%22niko_test1%22%2C%22language_code%22%3A%22zh-hans%22%2C%22allows_write_to_pm%22%3Atrue%7D&auth_date=1722587152&hash=8e791a997e55723714f73878fdeb27d7e17157f5fb2b460d6fc461f5ce82809c\", \r\n            init_data_raw: tgData.initDataRaw,\r\n            //inviter_user_id: XX\r\n            //inviter_user: 30 \r\n        };\r\n        \r\n        await postWithPromise(HttpManager.instance, HttpURL.signup_or_login, loginData);  \r\n\r\n        await getWithPromise(HttpManager.instance, HttpURL.login_data_update, \"\");  \r\n\r\n        //默认写死的,后面更新\r\n        const getMachineData = { \r\n            machine_id: \"ID_1000\",\r\n        }; \r\n        //获取娃娃机的信息\r\n        await postWithPromise(HttpManager.instance, HttpURL.update_machine_data, getMachineData);  \r\n\r\n        GameStateManager.instance.changeState(GameState.MAINMENU);  \r\n        yield \"StateChanged to MAINMENU\";  \r\n\r\n    } catch (error) {  \r\n        // 请求失败，处理错误  \r\n        console.error(\"HTTP request failed:\", error);  \r\n        yield \"HTTP request failed\"; // 可选：返回错误状态信息  \r\n    }\r\n}  \r\n\r\nexport class LoadingState extends GameStateBase {\r\n    enter(): void {\r\n        Splash.openSplash();\r\n\r\n        console.log(\"Entering LoadingState\");\r\n        (async () => {  \r\n            const gen = processSteps();  \r\n            for await (const message of gen) {  \r\n                console.log(message); // 输出生成器返回的状态信息  \r\n            }  \r\n        })();\r\n\r\n    }\r\n\r\n    exit(): void {\r\n        console.log(\"Exiting LoadingState\");\r\n\r\n        Splash.closeSplash();\r\n    }\r\n\r\n    update(): void {\r\n        // if(UIManager.instance !== null) {\r\n        //     if(UIManager.instance.initialized) {\r\n        //         this.gameStateManager.changeState(GameState.MAINMENU);\r\n        //     }\r\n        // }\r\n    }\r\n}","import { HttpManager } from \"../Http/HttpManager\";\r\nimport { UIManager } from \"../UI/UIManager\";\r\nimport { UIClassName } from \"../UI/UIDefine\";\r\nimport { GameStateBase } from \"./GameStateBase\";\r\nimport { RunTimeData } from \"../RunTimeData/RunTimeData\";\r\nimport { RunTimeDataManager } from \"../RunTimeData/RunTimeDataManager\";\r\nimport { ConfigManager } from \"../Config/ConfigManager\";\r\nimport { MachineConfig } from \"../Config/ExcelMachine\";\r\nimport { SoundFXManager } from \"../Component/SoundManager\";\r\n\r\nexport class MainMenuState extends GameStateBase {\r\n    enter(): void {\r\n        console.log(\"Entering MainMenuState\");\r\n\r\n        const machineID = RunTimeDataManager.instance.runTimeData.machine_data.id;\r\n        const machineConfig = MachineConfig.getConfig(machineID)\r\n\r\n        Laya.loader.load(machineConfig.Prefab).then(res => {\r\n            let sprite : Laya.Sprite = res.create();\r\n            this.gameStateManager.ownerPanel.addChild(sprite);\r\n        });  \r\n\r\n        UIManager.instance.ShowTips(`Welcome come! ${RunTimeDataManager.instance.runTimeData.user.nick_name}`);\r\n\r\n        SoundFXManager.playMusic(\"MUSIC_1000\");\r\n    }\r\n\r\n    exit(): void {\r\n        console.log(\"Exiting MainMenuState\");\r\n\r\n        //UIManager.instance.closeUI(\"UI_Main_Menu_HUD\");\r\n        //UIManager.instance.closeUI(\"UI_FX_Coin_Background_HUD\");\r\n    }\r\n\r\n    update(): void {\r\n        \r\n    }\r\n}","import { HttpManager } from \"../Http/HttpManager\";\r\nimport { GameStateBase } from \"./GameStateBase\";\r\nimport { LoadingState } from \"./LoadingState\";\r\nimport { MainMenuState } from \"./MainMenuState\";\r\n\r\nconst { regClass, property } = Laya;\r\n\r\nexport enum GameState {\r\n    LOADING,\r\n    MAINMENU,\r\n}\r\n\r\n@regClass('IjMsviyZT9-45baRHQ_jAg')\r\nexport class GameStateManager extends Laya.Script {\r\n    //declare owner : Laya.Sprite3D;\r\n    declare owner : Laya.Sprite;\r\n    private static _instance: GameStateManager;  \r\n    private _states: { [key in GameState]: GameStateBase } = {} as any;\r\n    private _currentState: GameStateBase;\r\n\r\n    public ownerPanel: Laya.Box;\r\n    //构造函数在编辑器期间也会执行\r\n    constructor() {  \r\n        super();\r\n    }\r\n\r\n    public static get instance(): GameStateManager {  \r\n        if (!GameStateManager._instance) {  \r\n            return null;\r\n        }  \r\n        return GameStateManager._instance;  \r\n    }  \r\n\r\n    public changeState(newState: GameState): void {\r\n        if (this._currentState) {\r\n            this._currentState.exit();\r\n        }\r\n        this._currentState = this._states[newState];\r\n        this._currentState.enter();\r\n    }\r\n\r\n    //组件被激活后执行，此时所有节点和组件均已创建完毕，此方法只执行一次\r\n    onAwake(): void {\r\n\r\n        if (GameStateManager._instance) {\r\n            throw new Error(\"Singleton class. Use getInstance() instead.\");\r\n        }\r\n        GameStateManager._instance = this;\r\n        this.ownerPanel = this.owner as Laya.Panel;\r\n\r\n        this._states[GameState.LOADING] = new LoadingState(this);\r\n        this._states[GameState.MAINMENU] = new MainMenuState(this);\r\n\r\n        this.changeState(GameState.LOADING);\r\n    }\r\n\r\n    //组件被启用后执行，例如节点被添加到舞台后\r\n    //onEnable(): void {}\r\n\r\n    //组件被禁用时执行，例如从节点从舞台移除后\r\n    //onDisable(): void {}\r\n\r\n    //第一次执行update之前执行，只会执行一次\r\n    //onStart(): void {}\r\n\r\n    //手动调用节点销毁时执行\r\n    //onDestroy(): void {}\r\n\r\n    //每帧更新时执行，尽量不要在这里写大循环逻辑或者使用getComponent方法\r\n    public onUpdate(): void {\r\n        if (this._currentState) {\r\n            this._currentState.update();\r\n        }\r\n    }\r\n\r\n    //每帧更新时执行，在update之后执行，尽量不要在这里写大循环逻辑或者使用getComponent方法\r\n    //onLateUpdate(): void {}\r\n\r\n    //鼠标点击后执行。与交互相关的还有onMouseDown等十多个函数，具体请参阅文档。\r\n    //onMouseClick(): void {}\r\n}","import { ParticleSystem, Particle} from \"./ParticleSystem\";\r\n\r\nconst { regClass, property } = Laya;\r\n\r\nclass RandomPositionParticle extends Particle {\r\n\r\n    startSize: number;\r\n    endSize: number;\r\n    \r\n    startAlpha: number;\r\n    endAlpha: number;\r\n\r\n    constructor(x: number, y: number, texture: Laya.Texture) {\r\n        super(x, y, texture, true); // 将其设为循环粒子\r\n    }\r\n\r\n    pingPong(t: number, min: number, max: number): number {\r\n        // Normalize t to range [0, 1]\r\n        const range = max - min;\r\n        const normalizedTime = t % (2 * range);\r\n        \r\n        // 如果在 [0, range] 区间内，直接返回 min + normalizedTime\r\n        // 如果在 [range, 2 * range] 区间内，返回 max - (normalizedTime - range)\r\n        return normalizedTime < range ? \r\n            min + normalizedTime : \r\n            max - (normalizedTime - range);\r\n    }\r\n\r\n    // 重置位置为随机值\r\n    reset(x: number, y: number, texture: Laya.Texture): void {\r\n        // 随机生成位置\r\n        const randomX = (Math.random() * 150); // 基于传入位置随机\r\n        const randomY = (Math.random() * 150); // 基于传入位置随机\r\n\r\n        super.reset(randomX, randomY, texture);\r\n        this.setLife(100, 200)\r\n        this.setSize(0.5, 1)\r\n        // 重新设置粒子的其他属性\r\n        this.life = Math.random() * (this.maxLife - this.minLife) + this.minLife; // 生命周期调整\r\n        this.fixedLife = this.life;\r\n\r\n        //this.size = Math.random() * (this.maxSize - this.minSize) + this.minSize; // 随机大小\r\n        this.startSize = 1;\r\n        this.endSize = 3;\r\n\r\n        this.startAlpha = 0;\r\n        this.endAlpha = 1;\r\n\r\n\r\n        this.size = this.startSize;\r\n        this.alpha = 0; // 初始透明度\r\n    }\r\n\r\n    // 重写 update 方法实现随机漂浮\r\n    update(): void {\r\n\r\n        // 计算进度，假设生命周期最大值为 maxLife\r\n        const progress = 1 - (this.life / this.fixedLife);\r\n        \r\n        // 使用 pingPong 函数更新大小和透明度\r\n        this.size = this.pingPong(progress, this.startSize, this.endSize);\r\n        this.alpha = this.pingPong(progress * 2, this.startAlpha, this.endAlpha);\r\n        \r\n        // 调整生命值\r\n        this.life -= 1; // 非循环粒子减少生命\r\n\r\n        // 如果是循环粒子，检查生命周期以重置\r\n        if (this.isLoop && this.life <= 0) {\r\n            this.reset(this.x, this.y, this.texture); // 重置为新的随机状态\r\n        }\r\n    }\r\n}\r\n\r\n\r\n@regClass('JOuJPy-aRF6Gf2uzJwRh_g')\r\nexport class FXStart extends Laya.Script {\r\n    //declare owner : Laya.Sprite3D;\r\n    declare owner : Laya.Sprite;\r\n    public particleSystem: ParticleSystem<RandomPositionParticle>;\r\n\r\n    onStart() {\r\n        const texture = this.owner.texture;\r\n        this.owner.texture = null;\r\n        this.particleSystem = new ParticleSystem(texture, 20);\r\n        this.particleSystem.emit(0, 0, RandomPositionParticle, 5);\r\n\r\n        // 开始更新和绘制粒子系统\r\n        Laya.timer.frameLoop(1, this, this.onParticleUpdate);\r\n    }\r\n\r\n    onTextureLoaded(): void {\r\n        // 获取已加载的纹理\r\n    }\r\n\r\n    onParticleUpdate(): void {\r\n        this.particleSystem.update();  // 更新粒子\r\n        this.particleSystem.draw(this.owner);  // 在 LayaAir 的 sprite 上绘制粒子\r\n    }\r\n\r\n    //组件被激活后执行，此时所有节点和组件均已创建完毕，此方法只执行一次\r\n    //onAwake(): void {}\r\n\r\n    //组件被启用后执行，例如节点被添加到舞台后\r\n    //onEnable(): void {}\r\n\r\n    //组件被禁用时执行，例如从节点从舞台移除后\r\n    //onDisable(): void {}\r\n\r\n    //第一次执行update之前执行，只会执行一次\r\n    //onStart(): void {}\r\n\r\n    //手动调用节点销毁时执行\r\n    //onDestroy(): void {}\r\n\r\n    //每帧更新时执行，尽量不要在这里写大循环逻辑或者使用getComponent方法\r\n    //onUpdate(): void {}\r\n\r\n    //每帧更新时执行，在update之后执行，尽量不要在这里写大循环逻辑或者使用getComponent方法\r\n    //onLateUpdate(): void {}\r\n\r\n    //鼠标点击后执行。与交互相关的还有onMouseDown等十多个函数，具体请参阅文档。\r\n    //onMouseClick(): void {}\r\n}"],"mappings":"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","ignoreList":[]}